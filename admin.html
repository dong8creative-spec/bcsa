<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ - ë¶€ì‚°ì²­ë…„ì‚¬ì—…ê°€</title>
    
    <!-- í°íŠ¸ -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Noto+Sans+KR:wght@300;400;500;700;900&display=swap" rel="stylesheet">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- ë‹¤ìŒ ìš°í¸ë²ˆí˜¸ ì„œë¹„ìŠ¤ + ì¹´ì¹´ì˜¤ ë§µ SDK (ì¥ì†Œ ì„ íƒìš©) -->
    <script src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
    <script type="text/javascript" src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=f35b8c9735d77cced1235c5775c7c3b1&libraries=services"></script>

    <!-- ì„¤ì • íŒŒì¼ -->
    <script src="./assets/js/config.js"></script>
    
    <!-- ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ -->
    <script src="./assets/js/utils.js"></script>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Noto Sans KR', 'sans-serif'],
                        pop: ['Poppins', 'sans-serif'],
                    },
                    colors: {
                        brand: '#0045a5', 
                        accent: '#3b82f6',
                        dark: '#0f172a',
                        gray: '#64748b',
                        soft: '#f8fafc',
                    },
                }
            }
        }
    </script>

    <style>
        body { background-color: #ffffff; color: #1e293b; font-family: 'Noto Sans KR', sans-serif; }
        .modal-scroll::-webkit-scrollbar { width: 6px; }
        .modal-scroll::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 4px; }
        .modal-scroll::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        .modal-scroll::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;
        
        // ==========================================
        // ìƒìˆ˜ ë° ì„¤ì •
        // ==========================================
        const STORAGE_KEY_MEMBERS = 'busan_ycc_members';
        const STORAGE_KEY_SEMINARS = 'busan_ycc_seminars';
        const STORAGE_KEY_POSTS = 'busan_ycc_posts';
        const STORAGE_KEY_CONTENT = 'busan_ycc_content';
        const STORAGE_KEY_MENU_ENABLED = 'busan_ycc_menu_enabled';
        const STORAGE_KEY_MENU_NAMES = 'busan_ycc_menu_names';
        const STORAGE_KEY_ADMIN_LOGS = 'busan_ycc_admin_logs';
        const STORAGE_KEY_CURRENT_USER = 'busan_ycc_current_user';
        const STORAGE_KEY_CSV_URLS = 'busan_ycc_csv_urls';
        const IMGBB_API_KEY = '4c975214037cdf1889d5d02a01a7831d';
        
        // ì¹´ì¹´ì˜¤ Maps JavaScript í‚¤
        const KAKAO_MAP_APP_KEY = 'f35b8c9735d77cced1235c5775c7c3b1';
        
        // ==========================================
        // Firebase ì´ˆê¸°í™”
        // ==========================================
        const firebaseConfig = {
            apiKey: "AIzaSyA9aeP_SeSCJIgzST45tPj7FFZZcEfEaec",
            authDomain: "bcsa-b190f.firebaseapp.com",
            projectId: "bcsa-b190f",
            storageBucket: "bcsa-b190f.firebasestorage.app",
            messagingSenderId: "999075400884",
            appId: "1:999075400884:web:a1ff5389741417e4ca5be1",
            measurementId: "G-13X3J2EYQ2"
        };
        
        // Firebase ì´ˆê¸°í™”
        let firebaseApp, firebaseAuth, firebaseDb;
        if (typeof firebase !== 'undefined') {
            firebaseApp = firebase.initializeApp(firebaseConfig);
            firebaseAuth = firebase.auth();
            firebaseDb = firebase.firestore();
            console.log('âœ… admin.html: Firebase ì´ˆê¸°í™” ì™„ë£Œ (Auth + Firestore)');
        } else {
            console.error('âŒ admin.html: Firebase SDKê°€ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
        }

        // ==========================================
        // ì•„ì´ì½˜ ì»´í¬ë„ŒíŠ¸
        // ==========================================
        const Icons = {
            Users: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>,
            Calendar: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="18" height="18" x="3" y="4" rx="2" ry="2"/><line x1="16" x2="16" y1="2" y2="6"/><line x1="8" x2="8" y1="2" y2="6"/><line x1="3" x2="21" y1="10" y2="10"/></svg>,
            Clock: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>,
            ChevronLeft: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="15 18 9 12 15 6"/></svg>,
            ChevronRight: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="9 18 15 12 9 6"/></svg>,
            Restaurant: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"/><path d="M7 2v20"/><path d="M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3z"/><path d="M21 15v7"/></svg>,
            MessageSquare: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>,
            Settings: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.1a2 2 0 0 1-1-1.72v-.51a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></svg>,
            Lock: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>,
            ArrowLeft: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m12 19-7-7 7-7"/><path d="M19 12H5"/></svg>,
            X: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>,
            Plus: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M5 12h14"/><path d="M12 5v14"/></svg>,
            Edit: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"/></svg>,
            Trash: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/></svg>,
            FileText: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"/><path d="M14 2v4a2 2 0 0 0 2 2h4"/><path d="M10 9H8"/><path d="M16 13H8"/><path d="M16 17H8"/></svg>,
            List: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="8" x2="21" y1="6" y2="6"/><line x1="8" x2="21" y1="12" y2="12"/><line x1="8" x2="21" y1="18" y2="18"/><line x1="3" x2="3.01" y1="6" y2="6"/><line x1="3" x2="3.01" y1="12" y2="12"/><line x1="3" x2="3.01" y1="18" y2="18"/></svg>,
            Download: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" x2="12" y1="15" y2="3"/></svg>,
            MapPin: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>,
        };
        
        // ==========================================
        // ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
        // ==========================================
        const loadDataFromStorage = (key, defaultValue) => {
            try {
                const stored = localStorage.getItem(key);
                return stored ? JSON.parse(stored) : defaultValue;
            } catch (error) {
                console.error(`ë°ì´í„° ë¡œë“œ ì˜¤ë¥˜ (${key}):`, error);
                return defaultValue;
            }
        };
        
        const saveDataToStorage = (key, data) => {
            try {
                localStorage.setItem(key, JSON.stringify(data));
            } catch (error) {
                console.error(`ë°ì´í„° ì €ì¥ ì˜¤ë¥˜ (${key}):`, error);
            }
        };
        
        // formatDateëŠ” utils.jsì—ì„œ ë¡œë“œë¨ (ì¤‘ë³µ ì„ ì–¸ ë°©ì§€)
        
        // ë¹„ë°€ë²ˆí˜¸ í•´ì‹œí™” í•¨ìˆ˜ (SHA-256)
        const hashPassword = async (password) => {
            const encoder = new TextEncoder();
            const data = encoder.encode(password);
            const hashBuffer = await crypto.subtle.digest('SHA-256', data);
            const hashArray = Array.from(new Uint8Array(hashBuffer));
            const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
            return hashHex;
        };
        
        // ì¹´ì¹´ì˜¤ ì§€ë„ ëª¨ë‹¬ ì»´í¬ë„ŒíŠ¸
        const KakaoMapModal = ({ onClose, onSelectLocation, initialLocation }) => {
            const mapContainerRef = React.useRef(null);
            const mapRef = React.useRef(null);
            const markerRef = React.useRef(null);
            const geocoderRef = React.useRef(null);
            const placesServiceRef = React.useRef(null);
            const [selectedPlace, setSelectedPlace] = useState(null);
            const [searchKeyword, setSearchKeyword] = useState('');
            const [searchResults, setSearchResults] = useState([]);
            const [mapLoaded, setMapLoaded] = useState(false);
            
            React.useEffect(() => {
                // ì¹´ì¹´ì˜¤ ì§€ë„ SDK ë¡œë“œ í™•ì¸ ë° ëŒ€ê¸°
                const initMap = () => {
                    try {
                        if (typeof kakao === 'undefined' || !kakao.maps) {
                            console.error('âŒ ì¹´ì¹´ì˜¤ ì§€ë„ SDKê°€ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. API í‚¤ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.');
                            alert('ì§€ë„ SDK ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•´ì£¼ì„¸ìš”.');
                            return;
                        }
                        
                        console.log('âœ… ì¹´ì¹´ì˜¤ ì§€ë„ SDK ë¡œë“œ í™•ì¸');
                        
                        // ì§€ë„ ì´ˆê¸°í™”
                        const center = initialLocation 
                            ? new kakao.maps.LatLng(initialLocation.lat, initialLocation.lng)
                            : new kakao.maps.LatLng(35.1796, 129.0756); // ë¶€ì‚° ì¤‘ì‹¬
                        
                        const mapOption = {
                            center: center,
                            level: 3
                        };
                        
                        mapRef.current = new kakao.maps.Map(mapContainerRef.current, mapOption);
                        console.log('âœ… ì¹´ì¹´ì˜¤ ì§€ë„ ì´ˆê¸°í™” ì™„ë£Œ');
                        
                        // Geocoder ì„œë¹„ìŠ¤ ì´ˆê¸°í™”
                        if (kakao.maps.services && kakao.maps.services.Geocoder) {
                            geocoderRef.current = new kakao.maps.services.Geocoder();
                            console.log('âœ… Geocoder ì„œë¹„ìŠ¤ ì´ˆê¸°í™” ì™„ë£Œ');
                        } else {
                            console.error('âŒ Geocoder ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                        }
                        
                        // Places ì„œë¹„ìŠ¤ ì´ˆê¸°í™”
                        if (kakao.maps.services && kakao.maps.services.Places) {
                            placesServiceRef.current = new kakao.maps.services.Places();
                            console.log('âœ… Places ì„œë¹„ìŠ¤ ì´ˆê¸°í™” ì™„ë£Œ');
                        } else {
                            console.error('âŒ Places ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. libraries=services íŒŒë¼ë¯¸í„°ë¥¼ í™•ì¸í•˜ì„¸ìš”.');
                            alert('ì¥ì†Œ ê²€ìƒ‰ ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. SDK ë¡œë“œ ì„¤ì •ì„ í™•ì¸í•´ì£¼ì„¸ìš”.');
                        }
                        
                        // ì§€ë„ ì»¨íŠ¸ë¡¤ ì¶”ê°€
                        const zoomControl = new kakao.maps.ZoomControl();
                        mapRef.current.addControl(zoomControl, kakao.maps.ControlPosition.RIGHT);
                        
                        // ì´ˆê¸° ìœ„ì¹˜ì— ë§ˆì»¤ í‘œì‹œ
                        if (initialLocation && initialLocation.lat && initialLocation.lng) {
                            markerRef.current = new kakao.maps.Marker({
                                position: center,
                                map: mapRef.current
                            });
                            setSelectedPlace({
                                name: initialLocation.name || '',
                                address: initialLocation.address || '',
                                lat: parseFloat(initialLocation.lat),
                                lng: parseFloat(initialLocation.lng)
                            });
                            console.log('âœ… ì´ˆê¸° ìœ„ì¹˜ ë§ˆì»¤ í‘œì‹œ:', initialLocation);
                        }
                        
                        // ì§€ë„ í´ë¦­ ì´ë²¤íŠ¸
                        kakao.maps.event.addListener(mapRef.current, 'click', (mouseEvent) => {
                            const latlng = mouseEvent.latLng;
                            console.log('ğŸ—ºï¸ ì§€ë„ í´ë¦­:', latlng.getLat(), latlng.getLng());
                            
                            // ê¸°ì¡´ ë§ˆì»¤ ì œê±°
                            if (markerRef.current) {
                                markerRef.current.setMap(null);
                            }
                            
                            // ìƒˆ ë§ˆì»¤ ì¶”ê°€
                            markerRef.current = new kakao.maps.Marker({
                                position: latlng,
                                map: mapRef.current
                            });
                            
                            // ì—­ì§€ì˜¤ì½”ë”©ìœ¼ë¡œ ì£¼ì†Œ ê°€ì ¸ì˜¤ê¸°
                            if (geocoderRef.current) {
                                geocoderRef.current.coord2Address(latlng.getLng(), latlng.getLat(), (result, status) => {
                                    if (status === kakao.maps.services.Status.OK && result && result.length > 0) {
                                        const roadAddr = result[0].road_address;
                                        const jibunAddr = result[0].address;
                                        
                                        setSelectedPlace({
                                            name: '',
                                            address: roadAddr ? roadAddr.address_name : jibunAddr.address_name,
                                            lat: latlng.getLat(),
                                            lng: latlng.getLng()
                                        });
                                        console.log('âœ… ì£¼ì†Œ ë³€í™˜ ì„±ê³µ:', roadAddr || jibunAddr);
                                    } else {
                                        setSelectedPlace({
                                            name: '',
                                            address: `ìœ„ë„: ${latlng.getLat().toFixed(6)}, ê²½ë„: ${latlng.getLng().toFixed(6)}`,
                                            lat: latlng.getLat(),
                                            lng: latlng.getLng()
                                        });
                                        console.warn('âš ï¸ ì£¼ì†Œ ë³€í™˜ ì‹¤íŒ¨, ì¢Œí‘œ ì‚¬ìš©');
                                    }
                                });
                            } else {
                                // Geocoderê°€ ì—†ìœ¼ë©´ ì¢Œí‘œë§Œ ì €ì¥
                                setSelectedPlace({
                                    name: '',
                                    address: `ìœ„ë„: ${latlng.getLat().toFixed(6)}, ê²½ë„: ${latlng.getLng().toFixed(6)}`,
                                    lat: latlng.getLat(),
                                    lng: latlng.getLng()
                                });
                                console.warn('âš ï¸ Geocoder ì„œë¹„ìŠ¤ ì—†ìŒ, ì¢Œí‘œ ì‚¬ìš©');
                            }
                        });
                        
                        setMapLoaded(true);
                        console.log('âœ… ì¹´ì¹´ì˜¤ ì§€ë„ ì´ˆê¸°í™” ì™„ë£Œ');
                        
                    } catch (error) {
                        console.error('âŒ ì¹´ì¹´ì˜¤ ì§€ë„ ì´ˆê¸°í™” ì˜¤ë¥˜:', error);
                        alert('ì§€ë„ ì´ˆê¸°í™”ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ' + error.message);
                    }
                };
                
                // SDKê°€ ì´ë¯¸ ë¡œë“œë˜ì—ˆìœ¼ë©´ ì¦‰ì‹œ ì´ˆê¸°í™”, ì•„ë‹ˆë©´ ëŒ€ê¸°
                if (typeof kakao !== 'undefined' && kakao.maps) {
                    initMap();
                } else {
                    // SDK ë¡œë“œ ëŒ€ê¸° (ìµœëŒ€ 3ì´ˆ)
                    let attempts = 0;
                    const checkInterval = setInterval(() => {
                        attempts++;
                        if (typeof kakao !== 'undefined' && kakao.maps) {
                            clearInterval(checkInterval);
                            initMap();
                        } else if (attempts >= 30) {
                            clearInterval(checkInterval);
                            console.error('âŒ ì¹´ì¹´ì˜¤ ì§€ë„ SDK ë¡œë“œ íƒ€ì„ì•„ì›ƒ');
                            alert('ì§€ë„ SDK ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•´ì£¼ì„¸ìš”.');
                        }
                    }, 100);
                    
                    return () => clearInterval(checkInterval);
                }
            }, []);
            
            // ì¥ì†Œ ê²€ìƒ‰
            const handleSearch = () => {
                console.log('ğŸ” ì¥ì†Œ ê²€ìƒ‰ ì‹œì‘:', searchKeyword);
                
                if (!searchKeyword.trim()) {
                    alert('ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    return;
                }
                
                if (!mapLoaded) {
                    alert('ì§€ë„ê°€ ì•„ì§ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
                    return;
                }
                
                if (!placesServiceRef.current) {
                    console.error('âŒ Places ì„œë¹„ìŠ¤ê°€ ì´ˆê¸°í™”ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
                    alert('ê²€ìƒ‰ ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\nlibrary=services íŒŒë¼ë¯¸í„°ê°€ í¬í•¨ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ê³  í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•´ì£¼ì„¸ìš”.');
                    return;
                }
                
                setSearchResults([]); // ê²€ìƒ‰ ê²°ê³¼ ì´ˆê¸°í™”
                
                try {
                    // í‚¤ì›Œë“œ ê²€ìƒ‰
                    placesServiceRef.current.keywordSearch(searchKeyword, (data, status) => {
                        console.log('ğŸ” ê²€ìƒ‰ ê²°ê³¼ ìƒíƒœ:', status);
                        
                        if (status === kakao.maps.services.Status.OK) {
                            if (!data || data.length === 0) {
                                alert('ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.');
                                setSearchResults([]);
                                return;
                            }
                            
                            const results = data.map(place => ({
                                name: place.place_name || '',
                                address: place.road_address_name || place.address_name || '',
                                lat: parseFloat(place.y),
                                lng: parseFloat(place.x)
                            })).filter(r => !isNaN(r.lat) && !isNaN(r.lng)); // ìœ íš¨í•œ ì¢Œí‘œë§Œ í•„í„°ë§
                            
                            setSearchResults(results);
                            console.log('âœ… ê²€ìƒ‰ ê²°ê³¼:', results.length, 'ê°œ');
                            
                            if (results.length === 0) {
                                alert('ìœ íš¨í•œ ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.');
                            }
                        } else if (status === kakao.maps.services.Status.ZERO_RESULT) {
                            console.log('âš ï¸ í‚¤ì›Œë“œ ê²€ìƒ‰ ê²°ê³¼ ì—†ìŒ, ì£¼ì†Œ ê²€ìƒ‰ ì‹œë„');
                            // í‚¤ì›Œë“œ ê²€ìƒ‰ ì‹¤íŒ¨ ì‹œ ì£¼ì†Œ ê²€ìƒ‰ ì‹œë„
                            if (geocoderRef.current) {
                                geocoderRef.current.addressSearch(searchKeyword, (result, geocodeStatus) => {
                                    if (geocodeStatus === kakao.maps.services.Status.OK && result && result.length > 0) {
                                        const results = result.map(item => ({
                                            name: '',
                                            address: item.road_address ? item.road_address.address_name : item.address_name,
                                            lat: parseFloat(item.y),
                                            lng: parseFloat(item.x)
                                        })).filter(r => !isNaN(r.lat) && !isNaN(r.lng));
                                        
                                        setSearchResults(results);
                                        console.log('âœ… ì£¼ì†Œ ê²€ìƒ‰ ê²°ê³¼:', results.length, 'ê°œ');
                                    } else {
                                        alert('ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.');
                                        setSearchResults([]);
                                        console.log('âŒ ì£¼ì†Œ ê²€ìƒ‰ ê²°ê³¼ ì—†ìŒ');
                                    }
                                });
                            } else {
                                alert('ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.');
                                setSearchResults([]);
                            }
                        } else if (status === kakao.maps.services.Status.ERROR) {
                            console.error('âŒ ì¹´ì¹´ì˜¤ë§µ API ì˜¤ë¥˜:', status);
                            alert('ê²€ìƒ‰ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. API í‚¤ë¥¼ í™•ì¸í•˜ê±°ë‚˜ ë‚˜ì¤‘ì— ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
                        } else {
                            console.error('âŒ ì¹´ì¹´ì˜¤ë§µ ê²€ìƒ‰ ì˜¤ë¥˜:', status);
                            alert('ê²€ìƒ‰ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
                        }
                    });
                } catch (error) {
                    console.error('âŒ ì¥ì†Œ ê²€ìƒ‰ ì˜¤ë¥˜:', error);
                    alert('ê²€ìƒ‰ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
                }
            };
            
            // ê²€ìƒ‰ ê²°ê³¼ ì„ íƒ
            const handleSelectResult = (result) => {
                const latlng = new kakao.maps.LatLng(result.lat, result.lng);
                
                mapRef.current.setCenter(latlng);
                mapRef.current.setLevel(3);
                
                // ê¸°ì¡´ ë§ˆì»¤ ì œê±°
                if (markerRef.current) {
                    markerRef.current.setMap(null);
                }
                
                // ìƒˆ ë§ˆì»¤ ì¶”ê°€
                markerRef.current = new kakao.maps.Marker({
                    position: latlng,
                    map: mapRef.current
                });
                
                setSelectedPlace({
                    name: result.name || '',
                    address: result.address,
                    lat: result.lat,
                    lng: result.lng
                });
                
                setSearchResults([]);
            };
            
            // ì¥ì†Œ í™•ì •
            const handleConfirm = () => {
                console.log('âœ”ï¸ ì¥ì†Œ í™•ì • ì‹œë„:', selectedPlace);
                
                if (!selectedPlace) {
                    alert('ì§€ë„ì—ì„œ ì¥ì†Œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
                    return;
                }
                
                // í•„ìˆ˜ í•„ë“œ ê²€ì¦
                if (!selectedPlace.lat || !selectedPlace.lng || isNaN(selectedPlace.lat) || isNaN(selectedPlace.lng)) {
                    console.error('âŒ ì¢Œí‘œ ì •ë³´ ëˆ„ë½ ë˜ëŠ” ì˜ëª»ë¨:', selectedPlace);
                    alert('ì¥ì†Œì˜ ì¢Œí‘œ ì •ë³´ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì„ íƒí•´ì£¼ì„¸ìš”.');
                    return;
                }
                
                // Firestore ì €ì¥ì„ ìœ„í•œ ë°ì´í„° ì •ê·œí™”
                const normalizedPlace = {
                    name: selectedPlace.name || '',
                    address: selectedPlace.address || '',
                    lat: parseFloat(selectedPlace.lat),
                    lng: parseFloat(selectedPlace.lng)
                };
                
                console.log('âœ… ì¥ì†Œ í™•ì • ì™„ë£Œ:', normalizedPlace);
                onSelectLocation(normalizedPlace);
                onClose();
            };
            
            return (
                <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70" onClick={(e) => e.target === e.currentTarget && onClose()}>
                    <div className="bg-white rounded-3xl p-6 max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col" onClick={(e) => e.stopPropagation()}>
                        <div className="flex items-center justify-between mb-4">
                            <h3 className="text-xl font-bold text-dark">ì¥ì†Œ ì„ íƒ (ì¹´ì¹´ì˜¤ ë§µ)</h3>
                            <button onClick={onClose} className="p-2 hover:bg-gray-100 rounded-lg transition-colors">
                                <Icons.X size={20} />
                            </button>
                        </div>
                        
                        {/* ê²€ìƒ‰ */}
                        <div className="flex gap-2 mb-4">
                            <input
                                type="text"
                                value={searchKeyword}
                                onChange={(e) => setSearchKeyword(e.target.value)}
                                onKeyPress={(e) => e.key === 'Enter' && handleSearch()}
                                placeholder="ì£¼ì†Œ ë˜ëŠ” ì¥ì†Œëª… ê²€ìƒ‰"
                                className="flex-1 p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none"
                            />
                            <button
                                onClick={handleSearch}
                                className="px-4 py-3 bg-brand text-white rounded-xl font-bold hover:bg-blue-700 transition-colors"
                            >
                                ê²€ìƒ‰
                            </button>
                        </div>
                        
                        {/* ê²€ìƒ‰ ê²°ê³¼ */}
                        {searchResults.length > 0 && (
                            <div className="mb-4 max-h-40 overflow-y-auto border border-gray-200 rounded-xl">
                                {searchResults.map((result, idx) => (
                                    <div
                                        key={idx}
                                        onClick={() => handleSelectResult(result)}
                                        className="p-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0"
                                    >
                                        {result.name && <p className="font-bold text-sm text-dark">{result.name}</p>}
                                        <p className="text-sm text-gray-600">{result.address}</p>
                                    </div>
                                ))}
                            </div>
                        )}
                        
                        {/* ì§€ë„ */}
                        <div 
                            ref={mapContainerRef} 
                            className="flex-1 min-h-[400px] rounded-xl border-2 border-gray-200 overflow-hidden"
                        />
                        
                        {/* ì„ íƒëœ ì¥ì†Œ ì •ë³´ */}
                        {selectedPlace && (
                            <div className="mt-4 p-4 bg-yellow-50 border border-yellow-300 rounded-xl">
                                <p className="text-sm font-bold text-yellow-700 mb-1">ì„ íƒëœ ì¥ì†Œ</p>
                                {selectedPlace.name && <p className="font-bold text-sm text-dark">{selectedPlace.name}</p>}
                                <p className="text-sm text-gray-700">{selectedPlace.address}</p>
                                <p className="text-xs text-gray-500 mt-1">
                                    ì¢Œí‘œ: {selectedPlace.lat?.toFixed(6)}, {selectedPlace.lng?.toFixed(6)}
                                </p>
                            </div>
                        )}
                        
                        {/* ë²„íŠ¼ */}
                        <div className="flex gap-3 mt-4">
                            <button
                                onClick={onClose}
                                className="flex-1 py-3 border-2 border-gray-200 rounded-xl font-bold text-gray-600 hover:bg-gray-50 transition-colors"
                            >
                                ì·¨ì†Œ
                            </button>
                            <button
                                onClick={handleConfirm}
                                disabled={!selectedPlace}
                                className={`flex-1 py-3 rounded-xl font-bold transition-colors ${
                                    selectedPlace 
                                        ? 'bg-brand text-white hover:bg-blue-700' 
                                        : 'bg-gray-200 text-gray-400 cursor-not-allowed'
                                }`}
                            >
                                ì„ íƒ ì™„ë£Œ
                            </button>
                        </div>
                    </div>
                </div>
            );
        };
        
        // DateTimePicker ì»¤ìŠ¤í…€ ì»´í¬ë„ŒíŠ¸
        const DateTimePicker = ({ value, onChange, placeholder }) => {
            const [showCalendar, setShowCalendar] = useState(false);
            const [currentMonth, setCurrentMonth] = useState(() => {
                if (value) {
                    const match = value.match(/(\d{4})\.(\d{2})\.(\d{2})/);
                    if (match) return new Date(parseInt(match[1]), parseInt(match[2]) - 1, 1);
                }
                return new Date();
            });
            const [selectedDate, setSelectedDate] = useState(() => {
                if (value) {
                    const match = value.match(/(\d{4})\.(\d{2})\.(\d{2})/);
                    if (match) return new Date(parseInt(match[1]), parseInt(match[2]) - 1, parseInt(match[3]));
                }
                return null;
            });
            const [selectedTime, setSelectedTime] = useState(() => {
                if (value) {
                    const timeMatch = value.match(/(\d{2}):(\d{2})/);
                    if (timeMatch) return `${timeMatch[1]}:${timeMatch[2]}`;
                }
                return '10:00';
            });
            const calendarRef = React.useRef(null);
            
            // ì™¸ë¶€ í´ë¦­ ì‹œ ë‹¬ë ¥ ë‹«ê¸°
            React.useEffect(() => {
                const handleClickOutside = (event) => {
                    if (calendarRef.current && !calendarRef.current.contains(event.target)) {
                        setShowCalendar(false);
                    }
                };
                document.addEventListener('mousedown', handleClickOutside);
                return () => document.removeEventListener('mousedown', handleClickOutside);
            }, []);
            
            // ì›”ì˜ ì¼ìˆ˜ ê³„ì‚°
            const getDaysInMonth = (year, month) => new Date(year, month + 1, 0).getDate();
            
            // ì›”ì˜ ì²« ë²ˆì§¸ ìš”ì¼
            const getFirstDayOfMonth = (year, month) => new Date(year, month, 1).getDay();
            
            // ë‹¬ë ¥ ë‚ ì§œ ë°°ì—´ ìƒì„±
            const generateCalendarDays = () => {
                const year = currentMonth.getFullYear();
                const month = currentMonth.getMonth();
                const daysInMonth = getDaysInMonth(year, month);
                const firstDay = getFirstDayOfMonth(year, month);
                const days = [];
                
                // ë¹ˆ ì¹¸ (ì´ì „ ë‹¬)
                for (let i = 0; i < firstDay; i++) {
                    days.push(null);
                }
                // í˜„ì¬ ë‹¬ ë‚ ì§œ
                for (let day = 1; day <= daysInMonth; day++) {
                    days.push(new Date(year, month, day));
                }
                return days;
            };
            
            // ì‹œê°„ ì˜µì…˜ ìƒì„± (30ë¶„ ë‹¨ìœ„)
            const timeOptions = [];
            for (let h = 0; h < 24; h++) {
                for (let m = 0; m < 60; m += 30) {
                    const hour = h.toString().padStart(2, '0');
                    const minute = m.toString().padStart(2, '0');
                    timeOptions.push(`${hour}:${minute}`);
                }
            }
            
            // ë‚ ì§œ ì„ íƒ
            const handleDateClick = (date) => {
                setSelectedDate(date);
            };
            
            // ì„ íƒ ì™„ë£Œ
            const handleConfirm = () => {
                if (selectedDate) {
                    const year = selectedDate.getFullYear();
                    const month = (selectedDate.getMonth() + 1).toString().padStart(2, '0');
                    const day = selectedDate.getDate().toString().padStart(2, '0');
                    const dateTimeStr = `${year}.${month}.${day} ${selectedTime}`;
                    onChange(dateTimeStr);
                    setShowCalendar(false);
                }
            };
            
            // ì´ì „ ë‹¬
            const prevMonth = () => {
                setCurrentMonth(new Date(currentMonth.getFullYear(), currentMonth.getMonth() - 1, 1));
            };
            
            // ë‹¤ìŒ ë‹¬
            const nextMonth = () => {
                setCurrentMonth(new Date(currentMonth.getFullYear(), currentMonth.getMonth() + 1, 1));
            };
            
            // ì˜¤ëŠ˜ ë‚ ì§œ ì²´í¬
            const isToday = (date) => {
                if (!date) return false;
                const today = new Date();
                return date.getDate() === today.getDate() && 
                       date.getMonth() === today.getMonth() && 
                       date.getFullYear() === today.getFullYear();
            };
            
            // ì„ íƒëœ ë‚ ì§œ ì²´í¬
            const isSelected = (date) => {
                if (!date || !selectedDate) return false;
                return date.getDate() === selectedDate.getDate() && 
                       date.getMonth() === selectedDate.getMonth() && 
                       date.getFullYear() === selectedDate.getFullYear();
            };
            
            const weekDays = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '];
            
            return (
                <div className="relative" ref={calendarRef}>
                    <div 
                        className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none cursor-pointer flex items-center justify-between bg-white"
                        onClick={() => setShowCalendar(!showCalendar)}
                    >
                        <span className={value ? 'text-gray-900' : 'text-gray-400'}>
                            {value || placeholder || 'ë‚ ì§œì™€ ì‹œê°„ì„ ì„ íƒí•˜ì„¸ìš”'}
                        </span>
                        <Icons.Calendar size={20} className="text-gray-400" />
                    </div>
                    
                    {showCalendar && (
                        <div className="absolute top-full left-0 mt-2 bg-white border-2 border-gray-200 rounded-2xl shadow-xl z-50 p-4 w-80">
                            {/* ì›” ë„¤ë¹„ê²Œì´ì…˜ */}
                            <div className="flex items-center justify-between mb-4">
                                <button type="button" onClick={prevMonth} className="p-2 hover:bg-gray-100 rounded-lg transition-colors">
                                    <Icons.ChevronLeft size={20} />
                                </button>
                                <span className="font-bold text-lg">
                                    {currentMonth.getFullYear()}ë…„ {currentMonth.getMonth() + 1}ì›”
                                </span>
                                <button type="button" onClick={nextMonth} className="p-2 hover:bg-gray-100 rounded-lg transition-colors">
                                    <Icons.ChevronRight size={20} />
                                </button>
                            </div>
                            
                            {/* ìš”ì¼ í—¤ë” */}
                            <div className="grid grid-cols-7 gap-1 mb-2">
                                {weekDays.map((day, idx) => (
                                    <div key={day} className={`text-center text-sm font-bold py-2 ${idx === 0 ? 'text-red-500' : idx === 6 ? 'text-blue-500' : 'text-gray-600'}`}>
                                        {day}
                                    </div>
                                ))}
                            </div>
                            
                            {/* ë‚ ì§œ ê·¸ë¦¬ë“œ */}
                            <div className="grid grid-cols-7 gap-1 mb-4">
                                {generateCalendarDays().map((date, idx) => (
                                    <button
                                        key={idx}
                                        type="button"
                                        disabled={!date}
                                        onClick={() => date && handleDateClick(date)}
                                        className={`
                                            w-9 h-9 rounded-lg text-sm font-medium transition-all
                                            ${!date ? 'invisible' : ''}
                                            ${date && isSelected(date) ? 'bg-brand text-white' : ''}
                                            ${date && isToday(date) && !isSelected(date) ? 'border-2 border-brand text-brand' : ''}
                                            ${date && !isSelected(date) && !isToday(date) ? 'hover:bg-gray-100' : ''}
                                            ${date && idx % 7 === 0 ? 'text-red-500' : ''}
                                            ${date && idx % 7 === 6 ? 'text-blue-500' : ''}
                                        `}
                                    >
                                        {date ? date.getDate() : ''}
                                    </button>
                                ))}
                            </div>
                            
                            {/* ì‹œê°„ ì„ íƒ */}
                            <div className="flex items-center gap-3 mb-4 pb-4 border-b border-gray-200">
                                <Icons.Clock size={18} className="text-gray-400" />
                                <span className="text-sm font-bold text-gray-700">ì‹œê°„:</span>
                                <select 
                                    value={selectedTime}
                                    onChange={(e) => setSelectedTime(e.target.value)}
                                    className="flex-1 p-2 border-2 border-gray-200 rounded-lg focus:border-brand focus:outline-none text-sm"
                                >
                                    {timeOptions.map(time => (
                                        <option key={time} value={time}>{time}</option>
                                    ))}
                                </select>
                            </div>
                            
                            {/* ì„ íƒ ì™„ë£Œ ë²„íŠ¼ */}
                            <button
                                type="button"
                                onClick={handleConfirm}
                                disabled={!selectedDate}
                                className={`w-full py-3 rounded-xl font-bold transition-colors ${
                                    selectedDate 
                                        ? 'bg-brand text-white hover:bg-blue-700' 
                                        : 'bg-gray-200 text-gray-400 cursor-not-allowed'
                                }`}
                            >
                                ì„ íƒ ì™„ë£Œ
                            </button>
                        </div>
                    )}
                </div>
            );
        };
        
        // íŒŒì¼ì„ Base64ë¡œ ë³€í™˜
        const fileToBase64 = (file) => {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.onloadend = () => resolve(reader.result);
                reader.onerror = reject;
                reader.readAsDataURL(file);
            });
        };
        
        // ì´ë¯¸ì§€ ë¦¬ì‚¬ì´ì§•
        const resizeImage = (file, maxWidth, maxHeight, quality = 0.9) => {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.onload = (e) => {
                    const img = new Image();
                    img.onload = () => {
                        const canvas = document.createElement('canvas');
                        let width = img.width;
                        let height = img.height;
                        
                        if (width > maxWidth || height > maxHeight) {
                            const ratio = Math.min(maxWidth / width, maxHeight / height);
                            width = width * ratio;
                            height = height * ratio;
                        }
                        
                        canvas.width = width;
                        canvas.height = height;
                        const ctx = canvas.getContext('2d');
                        ctx.drawImage(img, 0, 0, width, height);
                        
                        canvas.toBlob((blob) => {
                            if (blob) {
                                const reader = new FileReader();
                                reader.onloadend = () => resolve(reader.result);
                                reader.onerror = reject;
                                reader.readAsDataURL(blob);
                            } else {
                                reject(new Error('ì´ë¯¸ì§€ ë¦¬ì‚¬ì´ì§• ì‹¤íŒ¨'));
                            }
                        }, file.type || 'image/png', quality);
                    };
                    img.onerror = reject;
                    img.src = e.target.result;
                };
                reader.onerror = reject;
                reader.readAsDataURL(file);
            });
        };
        
        // ImgBB ì´ë¯¸ì§€ ì—…ë¡œë“œ
        const uploadImageToImgBB = async (base64Image, fileName) => {
            try {
                const base64Data = base64Image.split(',')[1] || base64Image;
                const formData = new FormData();
                formData.append('key', IMGBB_API_KEY);
                formData.append('image', base64Data);
                formData.append('name', fileName || 'image');

                const response = await fetch('https://api.imgbb.com/1/upload', {
                    method: 'POST',
                    body: formData
                });

                const data = await response.json();
                if (data.success && data.data && data.data.url) {
                    return {
                        success: true,
                        url: data.data.url,
                        deleteUrl: data.data.delete_url || null,
                        id: data.data.id
                    };
                } else {
                    throw new Error(data.error?.message || data.error || 'ì´ë¯¸ì§€ ì—…ë¡œë“œ ì‹¤íŒ¨');
                }
            } catch (error) {
                console.error('ImgBB ì—…ë¡œë“œ ì˜¤ë¥˜:', error);
                throw error;
            }
        };

        // ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ
        const downloadImage = async (imageUrl, fileName) => {
            try {
                const response = await fetch(imageUrl);
                const blob = await response.blob();
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = fileName || 'image.jpg';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            } catch (error) {
                console.error('ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ ì˜¤ë¥˜:', error);
                alert('ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
            }
        };
        
        // calculateStatusëŠ” utils.jsì—ì„œ ë¡œë“œë¨ (ì¤‘ë³µ ì„ ì–¸ ë°©ì§€)

        // ==========================================
        // ê¸°ë³¸ ë°ì´í„°
        // ==========================================
        const defaultContent = {
            hero_title: "í•¨ê»˜ ì„±ì¥í•˜ëŠ”\nì²­ë…„ ì‚¬ì—…ê°€ ì»¤ë®¤ë‹ˆí‹°\në¶€ì‚°ì²­ë…„ì‚¬ì—…ê°€ë“¤",
            hero_desc: "ë¶€ì‚° ì§€ì—­ ì²­ë…„ ì‚¬ì—…ê°€ë“¤ì´ ëª¨ì—¬ ì•„ì´ë””ì–´ë¥¼ ê³µìœ í•˜ê³ , ë„¤íŠ¸ì›Œí‚¹í•˜ë©° í•¨ê»˜ ì„±ì¥í•´ë‚˜ê°€ëŠ” ê³µê°„ì…ë‹ˆë‹¤.",
            // About í˜ì´ì§€ (ì†Œê°œ í˜ì´ì§€)
            about_hero_title: "í•¨ê»˜ ì„±ì¥í•˜ëŠ” ì‚¬ì—…ê°€ ë„¤íŠ¸ì›Œí¬",
            about_hero_desc: "ë¶€ì‚° ì§€ì—­ ì²­ë…„ ì‚¬ì—…ê°€ë“¤ì˜ ì„±ì¥ê³¼ ì—°ê²°ì„ ë•ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ì»¤ë®¤ë‹ˆí‹°, ë¶€ì²­ì‚¬ì…ë‹ˆë‹¤.",
            about_mission_title: "Platform for Businessmen",
            about_mission_desc_1: "ë¶€ì‚°ì²­ë…„ì‚¬ì—…ê°€ë“¤ì€ ì •ê¸°ì ì¸ ë„¤íŠ¸ì›Œí‚¹ê³¼ ì‹¤ë¬´ ì¤‘ì‹¬ì˜ ì„¸ë¯¸ë‚˜ë¥¼ í†µí•´ ì‹¤ì§ˆì ì¸ ë„ì›€ì„ ì œê³µí•©ë‹ˆë‹¤.",
            about_mission_desc_2: "ì—…ì¢…ì„ ë„˜ì–´ì„  í˜‘ì—…ê³¼ ì •ë³´ ê³µìœ ë¥¼ ì§€ì›í•˜ë©°, ì˜¨Â·ì˜¤í”„ë¼ì¸ì„ ì—°ê³„í•´ ì§€ì†ì ì¸ ë¹„ì¦ˆë‹ˆìŠ¤ í™•ì¥ì„ ë•ìŠµë‹ˆë‹¤.",
            about_mission_desc_3: "ë¶€ì²­ì‚¬ëŠ” ë‹¨ìˆœí•œ ëª¨ì„ì„ ë„˜ì–´, í•¨ê»˜ ì„±ì¥í•˜ëŠ” í”Œë«í¼ì…ë‹ˆë‹¤.",
            about_why_title: "'ë¶€ì²­ì‚¬'ê°€ í•„ìš”í•œ ì´ìœ ",
            about_why_subtitle: "í˜¼ì ê³ ë¯¼í•˜ì§€ ë§ˆì„¸ìš”. í•¨ê»˜í•˜ë©´ ë‹µì´ ë³´ì…ë‹ˆë‹¤.",
            about_why_1_title: "ê³ ë¦½ê°/ì••ë°•ê° í•´ì†Œ",
            about_why_1_desc: "ê°™ì€ ê¸¸ì„ ê±·ëŠ” ë™ë£Œë“¤ê³¼ ê³ ë¯¼ì„ ë‚˜ëˆ„ëŠ” ì‹¬ë¦¬ì  ì•ˆì „ë§",
            about_why_2_title: "ë²ˆì•„ì›ƒ ë°©ì§€",
            about_why_2_desc: "ì¼ê³¼ ì‚¶ì˜ ê· í˜•ì„ ì°¾ê³  ë¦¬í”„ë ˆì‹œí•  ìˆ˜ ìˆëŠ” ê¸°íšŒ ì œê³µ",
            about_why_3_title: "ì„±ì¥ì˜ í•œê³„ ê·¹ë³µ",
            about_why_3_desc: "ë‹¤ì–‘í•œ ê²½í—˜ ê³µìœ ë¥¼ í†µí•´ ìƒˆë¡œìš´ ì¸ì‚¬ì´íŠ¸ì™€ í˜‘ì—… ê¸°íšŒ íšë“",
            about_why_4_title: "ë„¤íŠ¸ì›Œí¬ í™•ì¥",
            about_why_4_desc: "íˆ¬ìì, ê³ ê°, íŒŒíŠ¸ë„ˆë¥¼ ë§Œë‚˜ ì‹¤ì§ˆì ì¸ ë¹„ì¦ˆë‹ˆìŠ¤ ê¸°íšŒ ì°½ì¶œ",
            about_history_title: "HISTORY",
            about_history_subtitle: "ë¶€ì‚°ì²­ë…„ì‚¬ì—…ê°€ë“¤ì´ ê±¸ì–´ì˜¨ ê¸¸",
            about_history_2014_title: "ì§€ì£¼íšŒì‚¬ ì„¤ë¦½ ê¸°íš",
            about_history_2014_desc: "ë¶€ì‚°ì²­ë…„ì‚¬ì—…ê°€ë“¤ í•„ìš”ì„± ê²€í†  ë° ê¸°íš",
            about_history_2017_title: "ì»¤ë®¤ë‹ˆí‹° êµ¬ì¶•",
            about_history_2017_desc: "íšŒì›ê°„ ì†Œí†µ ë‚´ë¶€ë§ êµ¬ì¶• ë° ì¹´ì¹´ì˜¤ ì˜¤í”ˆì±„íŒ…ë°© ê°œì„¤",
            about_history_2018_title: "ì²« ì˜¤í”„ë¼ì¸ í™œë™",
            about_history_2018_desc: "ì°½ì—…ìë“¤ì„ ìœ„í•œ ì²« ì„¸ë¯¸ë‚˜ ê°œìµœ ë° ë„¤íŠ¸ì›Œí‚¹ ëª¨ì„ ìš´ì˜",
            about_history_2024_title: "ì •ê¸° ì„¸ë¯¸ë‚˜ êµ¬ì¶•",
            about_history_2024_desc: "ì°½ì—…/ì„¸ë¬´/ë§ˆì¼€íŒ… êµìœ¡ í”„ë¡œê·¸ë¨ ë° ì •ê¸° ëª¨ì„ í™œì„±í™”",
            about_history_2025_title: "ë¹„ì˜ë¦¬ ë²•ì¸ ì„¤ë¦½",
            about_history_2025_desc: "ê³µì‹ ë‹¨ì²´ ë²•ì¸í™” ë° ì˜¨ë¼ì¸ í”Œë«í¼(ì–´í”Œ) ê°œë°œ ì¶”ì§„",
            about_future_title: "í–¥í›„ ê³„íš ë° ëª©í‘œ",
            about_future_subtitle: "ë¶€ì²­ì‚¬ëŠ” ë©ˆì¶”ì§€ ì•Šê³  ê³„ì† ì„±ì¥í•©ë‹ˆë‹¤.",
            about_future_1_title: "ë§ì¶¤í˜• ì—­ëŸ‰ êµìœ¡",
            about_future_1_desc: "ì°½ì—… ë‹¨ê³„ë³„ ì‹¤ë¬´ êµìœ¡(ì„¸ë¬´, ë§ˆì¼€íŒ… ë“±)ê³¼ ë©˜í† ë§ ê°•í™”",
            about_future_2_title: "ê³µê³µì‚¬ì—… ì—°ê³„",
            about_future_2_desc: "ì •ë¶€Â·ì§€ìì²´ ì‚¬ì—…ê³¼ í˜‘ë ¥í•˜ì—¬ ì‹¤ì§ˆì  í˜œíƒ ì œê³µ",
            about_future_3_title: "ì˜¨ë¼ì¸ í”Œë«í¼",
            about_future_3_desc: "íšŒì›ë“¤ì´ ì—°ê²°ë˜ê³  í˜‘ì—…í•  ìˆ˜ ìˆëŠ” ì „ìš© ì•±/ì›¹ êµ¬ì¶•",
            about_future_4_title: "ì‚¬íšŒê³µí—Œ í™œë™",
            about_future_4_desc: "ë©˜í† ë§, ì¬ëŠ¥ê¸°ë¶€ ë“± ì§€ì—­ì‚¬íšŒì™€ ìƒìƒí•˜ëŠ” í”„ë¡œê·¸ë¨",
            about_future_5_title: "ì •ì±… ì œì•ˆ",
            about_future_5_desc: "ë¶€ì‚° ì²­ë…„ ì°½ì—…ê°€ ì‹¤íƒœì¡°ì‚¬ ê¸°ë°˜ ë§ì¶¤í˜• ì •ì±… ì œì•ˆ",
            about_future_6_title: "ìì²´ ìˆ˜ìµëª¨ë¸",
            about_future_6_desc: "êµìœ¡ ì½˜í…ì¸ , êµ¿ì¦ˆ ë“± ì§€ì†ê°€ëŠ¥í•œ ìš´ì˜ ê¸°ë°˜ ë§ˆë ¨",
            about_contact_phone: "010-5323-9310",
            about_contact_email: "pujar@naver.com",
        };

        const defaultMembersData = [];
        const defaultSeminarsData = [];
        const defaultCommunityPosts = [];

        // ==========================================
        // ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ ì»´í¬ë„ŒíŠ¸
        // ==========================================
        const AdminDashboard = () => {
            // ë°ì´í„° ìƒíƒœ
            const [members, setMembers] = useState(defaultMembersData);
            
            // Firestoreì—ì„œ íšŒì› ë°ì´í„° ì‹¤ì‹œê°„ ë¡œë“œ
            useEffect(() => {
                if (typeof firebaseDb !== 'undefined' && firebaseDb) {
                    const unsubscribe = firebaseDb.collection('users')
                        .orderBy('createdAt', 'desc')
                        .onSnapshot((snapshot) => {
                            const usersData = snapshot.docs.map(doc => ({ 
                                id: doc.id, 
                                ...doc.data() 
                            }));
                            setMembers(usersData);
                            console.log('âœ… admin.html: Firestoreì—ì„œ íšŒì› ë°ì´í„° ë¡œë“œ:', usersData.length, 'ëª…');
                        }, (error) => {
                            console.error('âŒ admin.html: Firestore íšŒì› ë°ì´í„° ë¡œë“œ ì˜¤ë¥˜:', error);
                        });
                    
                    return () => unsubscribe();
                }
            }, []);
            const [seminars, setSeminars] = useState(defaultSeminarsData);
            
            // Firestoreì—ì„œ ì„¸ë¯¸ë‚˜ ë°ì´í„° ì‹¤ì‹œê°„ ë¡œë“œ
            useEffect(() => {
                if (typeof firebaseDb !== 'undefined' && firebaseDb) {
                    const unsubscribe = firebaseDb.collection('seminars')
                        .orderBy('createdAt', 'desc')
                        .onSnapshot((snapshot) => {
                            const seminarsData = snapshot.docs.map(doc => ({ 
                                id: doc.id, 
                                ...doc.data() 
                            }));
                            setSeminars(seminarsData);
                            console.log('âœ… admin.html: Firestoreì—ì„œ ì„¸ë¯¸ë‚˜ ë°ì´í„° ë¡œë“œ:', seminarsData.length, 'ê°œ');
                        }, (error) => {
                            console.error('âŒ admin.html: Firestore ì„¸ë¯¸ë‚˜ ë°ì´í„° ë¡œë“œ ì˜¤ë¥˜:', error);
                        });
                    
                    return () => unsubscribe();
                }
            }, []);
            const [posts, setPosts] = useState(defaultCommunityPosts);
            
            // Firestoreì—ì„œ ê²Œì‹œê¸€ ë°ì´í„° ì‹¤ì‹œê°„ ë¡œë“œ
            useEffect(() => {
                if (typeof firebaseDb !== 'undefined' && firebaseDb) {
                    const unsubscribe = firebaseDb.collection('posts')
                        .orderBy('createdAt', 'desc')
                        .onSnapshot((snapshot) => {
                            const postsData = snapshot.docs.map(doc => ({ 
                                id: doc.id, 
                                ...doc.data() 
                            }));
                            setPosts(postsData);
                            console.log('âœ… admin.html: Firestoreì—ì„œ ê²Œì‹œê¸€ ë°ì´í„° ë¡œë“œ:', postsData.length, 'ê°œ');
                        }, (error) => {
                            console.error('âŒ admin.html: Firestore ê²Œì‹œê¸€ ë°ì´í„° ë¡œë“œ ì˜¤ë¥˜:', error);
                        });
                    
                    return () => unsubscribe();
                }
            }, []);
            const [content, setContent] = useState(() => loadDataFromStorage(STORAGE_KEY_CONTENT, defaultContent));
            const [menuEnabled, setMenuEnabled] = useState(() => {
                const stored = loadDataFromStorage(STORAGE_KEY_MENU_ENABLED, {});
                // index.htmlê³¼ ì¼ì¹˜í•˜ëŠ” ê¸°ë³¸ê°’ ì„¤ì •
                return {
                    'í™ˆ': stored['í™ˆ'] !== undefined ? stored['í™ˆ'] : true,
                    'ì†Œê°œ': stored['ì†Œê°œ'] !== undefined ? stored['ì†Œê°œ'] : true,
                    'í”„ë¡œê·¸ë¨': stored['í”„ë¡œê·¸ë¨'] !== undefined ? stored['í”„ë¡œê·¸ë¨'] : true,
                    'ë¶€ì²­ì‚¬ íšŒì›': stored['ë¶€ì²­ì‚¬ íšŒì›'] !== undefined ? stored['ë¶€ì²­ì‚¬ íšŒì›'] : true,
                    'ì»¤ë®¤ë‹ˆí‹°': stored['ì»¤ë®¤ë‹ˆí‹°'] !== undefined ? stored['ì»¤ë®¤ë‹ˆí‹°'] : true,
                    'ì…ì°°ê³µê³ ': stored['ì…ì°°ê³µê³ '] !== undefined ? stored['ì…ì°°ê³µê³ '] : true,
                    'í›„ì›': stored['í›„ì›'] !== undefined ? stored['í›„ì›'] : true,
                    ...stored
                };
            });
            const [menuNames, setMenuNames] = useState(() => {
                const stored = loadDataFromStorage(STORAGE_KEY_MENU_NAMES, {});
                // index.htmlê³¼ ì¼ì¹˜í•˜ëŠ” ê¸°ë³¸ê°’ ì„¤ì •
                return {
                    'í™ˆ': stored['í™ˆ'] || 'í™ˆ',
                    'ì†Œê°œ': stored['ì†Œê°œ'] || 'ì†Œê°œ',
                    'í”„ë¡œê·¸ë¨': stored['í”„ë¡œê·¸ë¨'] || 'í”„ë¡œê·¸ë¨',
                    'ë¶€ì²­ì‚¬ íšŒì›': stored['ë¶€ì²­ì‚¬ íšŒì›'] || 'ë¶€ì²­ì‚¬ íšŒì›',
                    'ì»¤ë®¤ë‹ˆí‹°': stored['ì»¤ë®¤ë‹ˆí‹°'] || 'ì»¤ë®¤ë‹ˆí‹°',
                    'ì…ì°°ê³µê³ ': stored['ì…ì°°ê³µê³ '] || 'ì…ì°°ê³µê³ ',
                    'í›„ì›': stored['í›„ì›'] || 'í›„ì›',
                    ...stored
                };
            });
            const [logs, setLogs] = useState(() => loadDataFromStorage(STORAGE_KEY_ADMIN_LOGS, []));
            const [currentUser] = useState(() => loadDataFromStorage(STORAGE_KEY_CURRENT_USER, null));
            const [isLoadingSheets, setIsLoadingSheets] = useState(false);
            
            // UI ìƒíƒœ
            const [activeTab, setActiveTab] = useState('members'); 
            const [isMaster, setIsMaster] = useState(false);
            const [showMasterLogin, setShowMasterLogin] = useState(false);
            const [masterPwInput, setMasterPwInput] = useState('');
            
            // Google Sheetsì—ì„œ ë°ì´í„° ë¡œë“œ
            useEffect(() => {
                const loadDataFromSheets = async () => {
                    setIsLoadingSheets(true);
                    try {
                        // íšŒì› ë°ì´í„° ë¡œë“œ
                        if (typeof CONFIG !== 'undefined' && CONFIG.SHEET_URLS?.MEMBER) {
                            const csvUrl = CONFIG.SHEET_URLS.MEMBER;
                            if (csvUrl) {
                                const csvData = await fetchSheetData(csvUrl);
                                if (csvData && csvData.length > 0) {
                                    // localStorageì— ìºì‹œ ì €ì¥
                                    saveDataToStorage(STORAGE_KEY_MEMBERS, csvData);
                                    setMembers(csvData);
                                    console.log('âœ… Google Sheetsì—ì„œ íšŒì› ë°ì´í„° ë¡œë“œ ì™„ë£Œ:', csvData.length, 'ëª…');
                                }
                            }
                        }
                        
                        // í”„ë¡œê·¸ë¨ ë°ì´í„° ë¡œë“œ
                        if (typeof CONFIG !== 'undefined' && CONFIG.SHEET_URLS?.SEMINAR) {
                            const csvUrl = CONFIG.SHEET_URLS.SEMINAR;
                            if (csvUrl) {
                                const csvData = await fetchSheetData(csvUrl);
                                if (csvData && csvData.length > 0) {
                                    // ìƒíƒœ ê³„ì‚° ì¶”ê°€
                                    const seminarsWithStatus = csvData.map(item => ({
                                        ...item,
                                        status: calculateStatus(item.date || item.Date || item.ë‚ ì§œ || '')
                                    }));
                                    // localStorageì— ìºì‹œ ì €ì¥
                                    saveDataToStorage(STORAGE_KEY_SEMINARS, seminarsWithStatus);
                                    setSeminars(seminarsWithStatus);
                                    console.log('âœ… Google Sheetsì—ì„œ í”„ë¡œê·¸ë¨ ë°ì´í„° ë¡œë“œ ì™„ë£Œ:', seminarsWithStatus.length, 'ê°œ');
                                }
                            }
                        }
                        
                        // ê²Œì‹œê¸€ ë°ì´í„° ë¡œë“œ
                        if (typeof CONFIG !== 'undefined' && CONFIG.SHEET_URLS?.POSTS) {
                            const csvUrl = CONFIG.SHEET_URLS.POSTS;
                            if (csvUrl) {
                                const csvData = await fetchSheetData(csvUrl);
                                if (csvData && csvData.length > 0) {
                                    // localStorageì— ìºì‹œ ì €ì¥
                                    saveDataToStorage(STORAGE_KEY_POSTS, csvData);
                                    setPosts(csvData);
                                    console.log('âœ… Google Sheetsì—ì„œ ê²Œì‹œê¸€ ë°ì´í„° ë¡œë“œ ì™„ë£Œ:', csvData.length, 'ê°œ');
                                }
                            }
                        }
                    } catch (error) {
                        console.error('Google Sheets ë°ì´í„° ë¡œë“œ ì˜¤ë¥˜:', error);
                        addLog('ERROR', 'ë°ì´í„° ë¡œë“œ', `Google Sheets ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨: ${error.message}`, currentUser?.name || 'ì‹œìŠ¤í…œ');
                    } finally {
                        setIsLoadingSheets(false);
                    }
                };
                
                // ì´ˆê¸° ë¡œë“œ
                loadDataFromSheets();
            }, []); // ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ í•œ ë²ˆë§Œ ì‹¤í–‰
            
            // ==========================================
            // CSV ìë™ ë°±ì—… í•¨ìˆ˜
            // ==========================================
            
            /**
             * ë°ì´í„°ë¥¼ CSV í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•˜ì—¬ Google Sheetsì— ë°±ì—…
             * @param {Array} data - ë°±ì—…í•  ë°ì´í„° ë°°ì—´
             * @param {string} type - ë°ì´í„° íƒ€ì… ('members', 'seminars', 'posts')
             */
            const backupToCSV = async (data, type) => {
                try {
                    if (!data || !Array.isArray(data) || data.length === 0) {
                        console.log(`âš ï¸ ë°±ì—…í•  ${type} ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.`);
                        return;
                    }
                    
                    // CSV ë³€í™˜
                    const csvContent = convertToCSV(data);
                    
                    if (!csvContent) {
                        console.error(`âŒ CSV ë³€í™˜ ì‹¤íŒ¨: ${type}`);
                        addLog('ERROR', type, `CSV ë³€í™˜ ì‹¤íŒ¨: ${type}`, currentUser?.name);
                        return;
                    }
                    
                    // Google Apps Script APIë¥¼ í†µí•œ ë°±ì—… ì‹œë„
                    if (typeof CONFIG !== 'undefined' && CONFIG.GOOGLE_APPS_SCRIPT?.WEB_APP_URL) {
                        try {
                            // Google Apps Script ì›¹ì•±ì— CSV ë°ì´í„° ì „ì†¡
                            const response = await fetch(CONFIG.GOOGLE_APPS_SCRIPT.WEB_APP_URL, {
                                method: 'POST',
                                headers: {
                                    'Content-Type': 'application/json',
                                },
                                body: JSON.stringify({
                                    action: 'backupCSV',
                                    type: type,
                                    csvContent: csvContent,
                                    data: data
                                })
                            });
                            
                            if (response.ok) {
                                const result = await response.json();
                                if (result.success) {
                                    console.log(`âœ… ${type} CSV ë°±ì—… ì„±ê³µ (Google Apps Script)`);
                                    addLog('BACKUP', type, `${type} ë°ì´í„° CSV ë°±ì—… ì™„ë£Œ (${data.length}ê°œ)`, currentUser?.name);
                                } else {
                                    throw new Error(result.error || 'ë°±ì—… ì‹¤íŒ¨');
                                }
                            } else {
                                throw new Error(`HTTP error! status: ${response.status}`);
                            }
                        } catch (error) {
                            console.error(`âŒ ${type} CSV ë°±ì—… ì‹¤íŒ¨ (Google Apps Script):`, error);
                            addLog('ERROR', type, `CSV ë°±ì—… ì‹¤íŒ¨: ${error.message}`, currentUser?.name);
                            // Google Apps Script ì‹¤íŒ¨ ì‹œ CSV ë‹¤ìš´ë¡œë“œ ë§í¬ ìƒì„± (ìˆ˜ë™ ë°±ì—…)
                            console.log(`ëŒ€ì•ˆ: CSV íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì œê³µ`);
                            // downloadCSVFile(csvContent, type); // ì£¼ì„ ì²˜ë¦¬: ìë™ ë‹¤ìš´ë¡œë“œëŠ” ì‚¬ìš©ì ê²½í—˜ì„ í•´ì¹  ìˆ˜ ìˆìŒ
                        }
                    } else {
                        // Google Apps Script URLì´ ì—†ìœ¼ë©´ ë¡œê·¸ë§Œ ê¸°ë¡
                        console.log(`âš ï¸ Google Apps Script URLì´ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. CSV ë°±ì—…ì„ ìœ„í•´ config.jsì— WEB_APP_URLì„ ì„¤ì •í•˜ì„¸ìš”.`);
                        addLog('INFO', type, `CSV ë°±ì—… ì¤€ë¹„ ì™„ë£Œ (Google Apps Script URL ë¯¸ì„¤ì •)`, currentUser?.name);
                    }
                } catch (error) {
                    console.error(`âŒ CSV ë°±ì—… ì˜¤ë¥˜ (${type}):`, error);
                    addLog('ERROR', type, `CSV ë°±ì—… ì¤‘ ì˜¤ë¥˜ ë°œìƒ: ${error.message}`, currentUser?.name);
                }
            };
            
            /**
             * CSV íŒŒì¼ ë‹¤ìš´ë¡œë“œ (ìˆ˜ë™ ë°±ì—…ìš©)
             * @param {string} csvContent - CSV ë¬¸ìì—´
             * @param {string} type - íŒŒì¼ íƒ€ì…
             */
            const downloadCSVFile = (csvContent, type) => {
                try {
                    const blob = new Blob(['\uFEFF' + csvContent], { type: 'text/csv;charset=utf-8;' }); // BOM ì¶”ê°€ (í•œê¸€ ê¹¨ì§ ë°©ì§€)
                    const url = URL.createObjectURL(blob);
                    const link = document.createElement('a');
                    link.href = url;
                    link.download = `backup_${type}_${new Date().toISOString().split('T')[0]}.csv`;
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                    URL.revokeObjectURL(url);
                    console.log(`âœ… ${type} CSV íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì™„ë£Œ`);
                } catch (error) {
                    console.error(`CSV íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì˜¤ë¥˜:`, error);
                }
            };
            
            // ë°ì´í„° ì €ì¥ (ë³€ê²½ ì‹œ ìë™) ë° CSV ë°±ì—…
            useEffect(() => {
                saveDataToStorage(STORAGE_KEY_MEMBERS, members);
                
                // CSV ìë™ ë°±ì—… (ì´ˆê¸° ë¡œë“œê°€ ì•„ë‹Œ ê²½ìš°ì—ë§Œ)
                if (members.length > 0) {
                    const csvUrl = (typeof CONFIG !== 'undefined' && CONFIG.SHEET_URLS?.MEMBER) 
                        ? CONFIG.SHEET_URLS.MEMBER 
                        : '';
                    
                    // CSV URLì´ ì„¤ì •ë˜ì–´ ìˆê³ , Google Apps Scriptê°€ ì„¤ì •ë˜ì–´ ìˆìœ¼ë©´ ë°±ì—…
                    if (csvUrl || (typeof CONFIG !== 'undefined' && CONFIG.GOOGLE_APPS_SCRIPT?.WEB_APP_URL)) {
                        // ë””ë°”ìš´ì‹±: 2ì´ˆ í›„ ë°±ì—… (ì—°ì† ë³€ê²½ ë°©ì§€)
                        const timeoutId = setTimeout(() => {
                            backupToCSV(members, 'members');
                        }, 2000);
                        
                        return () => clearTimeout(timeoutId);
                    }
                }
            }, [members]);
            
            useEffect(() => {
                // í…ŒìŠ¤íŠ¸ ì„¸ë¯¸ë‚˜ ë°ì´í„° í•„í„°ë§ í›„ ì €ì¥
                const filtered = seminars.filter(s => {
                    if (s.id === 1 || s.id === 2 || s.id === 3) return false;
                    const testTitles = [
                        '2025 ìƒë°˜ê¸° ìŠ¤íƒ€íŠ¸ì—… íˆ¬ì íŠ¸ë Œë“œ',
                        'ë¶€ì‚° ì²­ë…„ ì°½ì—…ê°€ ë„¤íŠ¸ì›Œí‚¹ ë‚˜ì´íŠ¸',
                        'ì´ˆê¸° ì°½ì—…ê°€ë¥¼ ìœ„í•œ ì„¸ë¬´/ë…¸ë¬´ íŠ¹ê°•'
                    ];
                    if (testTitles.includes(s.title)) return false;
                    return true;
                });
                
                // í•„í„°ë§ëœ ë°ì´í„°ê°€ ë‹¤ë¥´ë©´ ìƒíƒœ ì—…ë°ì´íŠ¸
                if (filtered.length !== seminars.length) {
                    setSeminars(filtered);
                    return;
                }
                
                saveDataToStorage(STORAGE_KEY_SEMINARS, filtered);
                
                // CSV ìë™ ë°±ì—…
                if (filtered.length > 0) {
                    const csvUrl = (typeof CONFIG !== 'undefined' && CONFIG.SHEET_URLS?.SEMINAR) 
                        ? CONFIG.SHEET_URLS.SEMINAR 
                        : '';
                    
                    if (csvUrl || (typeof CONFIG !== 'undefined' && CONFIG.GOOGLE_APPS_SCRIPT?.WEB_APP_URL)) {
                        const timeoutId = setTimeout(() => {
                            backupToCSV(filtered, 'seminars');
                        }, 2000);
                        
                        return () => clearTimeout(timeoutId);
                    }
                }
            }, [seminars]);
            
            useEffect(() => {
                saveDataToStorage(STORAGE_KEY_POSTS, posts);
                
                // CSV ìë™ ë°±ì—… (ê²Œì‹œê¸€ì€ Google Apps Script API ì‚¬ìš©)
                if (posts.length > 0 && typeof addPostToSheet === 'function') {
                    // ê²Œì‹œê¸€ì€ Google Apps Script APIë¥¼ í†µí•´ ì§ì ‘ ì €ì¥ë˜ë¯€ë¡œ ì—¬ê¸°ì„œëŠ” ë¡œê·¸ë§Œ ê¸°ë¡
                    console.log('ê²Œì‹œê¸€ ë°ì´í„° ë³€ê²½ë¨ (Google Apps Script API ì‚¬ìš©)');
                } else if (posts.length > 0) {
                    // Google Apps Script APIê°€ ì—†ìœ¼ë©´ CSV ë°±ì—…
                    const csvUrl = (typeof CONFIG !== 'undefined' && CONFIG.SHEET_URLS?.POSTS) 
                        ? CONFIG.SHEET_URLS.POSTS 
                        : '';
                    
                    if (csvUrl || (typeof CONFIG !== 'undefined' && CONFIG.GOOGLE_APPS_SCRIPT?.WEB_APP_URL)) {
                        const timeoutId = setTimeout(() => {
                            backupToCSV(posts, 'posts');
                        }, 2000);
                        
                        return () => clearTimeout(timeoutId);
                    }
                }
            }, [posts]);
            
            useEffect(() => {
                saveDataToStorage(STORAGE_KEY_CONTENT, content);
            }, [content]);
            
            // ë¡œê·¸ ì¶”ê°€ í•¨ìˆ˜
            const addLog = (action, targetType, details, adminName, itemInfo) => {
                const newLog = {
                    timestamp: new Date().toLocaleString('ko-KR'),
                    action,
                    targetType,
                    details,
                    adminName: adminName || currentUser?.name || 'ì‹œìŠ¤í…œ',
                    itemInfo: itemInfo || '',
                };
                setLogs(prev => [...prev, newLog]);
                saveDataToStorage(STORAGE_KEY_ADMIN_LOGS, [...logs, newLog]);
            };
            
            // ë§ˆìŠ¤í„° ë¡œê·¸ì¸ í•¸ë“¤ëŸ¬
            const handleMasterLogin = () => {
                if (masterPwInput.trim() === '0219') {
                    setIsMaster(true);
                    setShowMasterLogin(false);
                    setMasterPwInput('');
                    addLog('MASTER_LOGIN', 'ì‹œìŠ¤í…œ', 'ë§ˆìŠ¤í„° ëª¨ë“œ ë¡œê·¸ì¸', currentUser?.name || 'ìµëª…');
                    } else {
                    alert('ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
                }
            };
            
            // ë§ˆìŠ¤í„°ì½”ë“œ ìë™ ì§„ì… ê¸°ëŠ¥ (useEffectë¡œ ìƒíƒœ ë³€ê²½ ê°ì§€)
            useEffect(() => {
                if (showMasterLogin && masterPwInput.trim() === '0219') {
                    const timer = setTimeout(() => {
                        handleMasterLogin();
                    }, 100);
                    return () => clearTimeout(timer);
                }
            }, [masterPwInput, showMasterLogin]);
            
            // localStorageì—ì„œ Firestoreë¡œ ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜
            const migrateToFirestore = async () => {
                if (!confirm('localStorage ë°ì´í„°ë¥¼ Firestoreë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n\nì´ ì‘ì—…ì€ ê¸°ì¡´ localStorage ë°ì´í„°ë¥¼ Firestoreì— ë³µì‚¬í•©ë‹ˆë‹¤.')) {
                    return;
                }
                
                try {
                    let migrated = { users: 0, seminars: 0, posts: 0 };
                    
                    // íšŒì› ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜
                    const usersData = localStorage.getItem('busan_ycc_members') || localStorage.getItem('busan_ycc_users');
                    if (usersData) {
                        const users = JSON.parse(usersData);
                        for (const user of users) {
                            // ì¤‘ë³µ ì²´í¬
                            const existing = await firebaseDb.collection('users')
                                .where('email', '==', user.email)
                                .limit(1)
                                .get();
                            
                            if (existing.empty) {
                                await firebaseDb.collection('users').add({
                                    ...user,
                                    createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                                    updatedAt: firebase.firestore.FieldValue.serverTimestamp()
                                });
                                migrated.users++;
                            }
                        }
                    }
                    
                    // ì„¸ë¯¸ë‚˜ ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜
                    const seminarsData = localStorage.getItem('busan_ycc_seminars');
                    if (seminarsData) {
                        const seminars = JSON.parse(seminarsData);
                        for (const seminar of seminars) {
                            await firebaseDb.collection('seminars').add({
                                ...seminar,
                                createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                                updatedAt: firebase.firestore.FieldValue.serverTimestamp()
                            });
                            migrated.seminars++;
                        }
                    }
                    
                    // ê²Œì‹œê¸€ ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜
                    const postsData = localStorage.getItem('busan_ycc_posts');
                    if (postsData) {
                        const posts = JSON.parse(postsData);
                        for (const post of posts) {
                            await firebaseDb.collection('posts').add({
                                ...post,
                                createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                                updatedAt: firebase.firestore.FieldValue.serverTimestamp()
                            });
                            migrated.posts++;
                        }
                    }
                    
                    alert(`âœ… ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ë£Œ!\n\níšŒì›: ${migrated.users}ëª…\nì„¸ë¯¸ë‚˜: ${migrated.seminars}ê°œ\nê²Œì‹œê¸€: ${migrated.posts}ê°œ`);
                    addLog('MIGRATION', 'ì‹œìŠ¤í…œ', 'localStorage â†’ Firestore ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ë£Œ', currentUser?.name || 'ì‹œìŠ¤í…œ');
                } catch (error) {
                    console.error('ë§ˆì´ê·¸ë ˆì´ì…˜ ì˜¤ë¥˜:', error);
                    alert('ë§ˆì´ê·¸ë ˆì´ì…˜ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
                }
            };
            
            // ë°ì´í„° ì´ˆê¸°í™” í•¨ìˆ˜ (í–‡ë°˜ ê³„ì •ë§Œ ìœ ì§€)
            const handleDataReset = async () => {
                if (!confirm('âš ï¸ ê²½ê³ : ëª¨ë“  ë°ì´í„°ê°€ ì´ˆê¸°í™”ë©ë‹ˆë‹¤.\n\ní–‡ë°˜ ê³„ì •ë§Œ ë‚¨ê³  ëª¨ë“  íšŒì›, í”„ë¡œê·¸ë¨, ê²Œì‹œê¸€ ë°ì´í„°ê°€ ì‚­ì œë©ë‹ˆë‹¤.\n\nì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ê³„ì†í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                    return;
                }
                
                if (!confirm('ì •ë§ë¡œ ëª¨ë“  ë°ì´í„°ë¥¼ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n\në§ˆì§€ë§‰ í™•ì¸ì…ë‹ˆë‹¤.')) {
                    return;
                }
                
                try {
                    // í–‡ë°˜ ê³„ì • ë¹„ë°€ë²ˆí˜¸ í•´ì‹œí™”
                    const hashedPassword = await hashPassword('0219');
                    
                    // í–‡ë°˜ ê³„ì • ê¸°ë³¸ ë°ì´í„°
                    const hatbanAccount = {
                        id: 'í–‡ë°˜',
                        name: 'í–‡ë°˜',
                        password: hashedPassword,
                        email: 'admin@busan-ycc.com',
                        phone: '',
                        address: '',
                        company: 'ë¶€ì‚°ì²­ë…„ì‚¬ì—…ê°€ë“¤',
                        industry: '',
                        role: 'ê´€ë¦¬ì',
                        businessType: 'ì‚¬ì—…ì',
                        businessRegistrationNumber: '',
                        memberGrade: 'ê´€ë¦¬ì',
                        approvalStatus: 'approved',
                        isAdmin: true,
                        img: 'https://ui-avatars.com/api/?name=í–‡ë°˜&background=0045a5&color=fff',
                        hasDonated: false,
                        createdAt: new Date().toISOString(),
                        updatedAt: new Date().toISOString()
                    };
                    
                    // ëª¨ë“  localStorage ë°ì´í„° ì´ˆê¸°í™”
                    localStorage.removeItem(STORAGE_KEY_MEMBERS);
                    localStorage.removeItem(STORAGE_KEY_SEMINARS);
                    localStorage.removeItem(STORAGE_KEY_POSTS);
                    localStorage.removeItem(STORAGE_KEY_CONTENT);
                    localStorage.removeItem(STORAGE_KEY_MENU_ENABLED);
                    localStorage.removeItem(STORAGE_KEY_MENU_NAMES);
                    localStorage.removeItem(STORAGE_KEY_ADMIN_LOGS);
                    localStorage.removeItem(STORAGE_KEY_CSV_URLS);
                    localStorage.removeItem('busan_ycc_users');
                    localStorage.removeItem('busan_ycc_current_user');
                    localStorage.removeItem('busan_ycc_seminar_applications');
                    localStorage.removeItem('busan_ycc_inquiries');
                    
                    // í–‡ë°˜ ê³„ì •ë§Œ ì €ì¥
                    saveDataToStorage(STORAGE_KEY_MEMBERS, [hatbanAccount]);
                    
                    // ìƒíƒœ ì—…ë°ì´íŠ¸
                    setMembers([hatbanAccount]);
                    setSeminars([]);
                    setPosts([]);
                    
                    // ë¡œê·¸ ì¶”ê°€
                    addLog('RESET', 'ì „ì²´ ë°ì´í„°', 'ëª¨ë“  ë°ì´í„°ê°€ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤. (í–‡ë°˜ ê³„ì •ë§Œ ìœ ì§€)', currentUser?.name || 'ì‹œìŠ¤í…œ');
                    
                    alert('âœ… ë°ì´í„° ì´ˆê¸°í™”ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.\n\ní–‡ë°˜ ê³„ì •ë§Œ ë‚¨ì•„ìˆìŠµë‹ˆë‹¤.');
                } catch (error) {
                    console.error('ë°ì´í„° ì´ˆê¸°í™” ì˜¤ë¥˜:', error);
                    alert('ë°ì´í„° ì´ˆê¸°í™” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
                }
            };
            
            // íƒ­ ëª©ë¡
            const tabs = [
                { id: 'members', label: 'íšŒì› ê´€ë¦¬', icon: Icons.Users },
                { id: 'seminars', label: 'í”„ë¡œê·¸ë¨ ê´€ë¦¬', icon: Icons.Calendar },
                { id: 'community', label: 'ì»¤ë®¤ë‹ˆí‹° ê´€ë¦¬', icon: Icons.MessageSquare },
                { id: 'inquiries', label: 'ë¬¸ì˜í•˜ê¸° ê´€ë¦¬', icon: Icons.MessageSquare },
                { id: 'master', label: 'admin', icon: Icons.Lock, masterOnly: true },
            ];

            return (
                <div className="min-h-screen bg-soft">
                    {/* í—¤ë” */}
                    <div className="bg-white border-b border-gray-200 sticky top-0 z-50">
                        <div className="container mx-auto px-4 py-4">
                            <div className="flex items-center justify-between">
                                <div>
                                    <h1 className="text-2xl font-bold text-dark">ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</h1>
                                    <p className="text-sm text-gray-500">ì‚¬ì´íŠ¸ì˜ ëª¨ë“  ì½˜í…ì¸ ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                                            </div>
                                                            <button
                                    onClick={() => window.location.href = 'index.html'}
                                    className="flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg font-bold text-gray-700 transition-colors"
                                >
                                    <Icons.ArrowLeft size={20} />
                                    ë©”ì¸ìœ¼ë¡œ
                                                            </button>
                                            </div>
                                        </div>
                                    </div>
                                    
                    {/* íƒ­ ë„¤ë¹„ê²Œì´ì…˜ */}
                    <div className="bg-white border-b border-gray-200">
                        <div className="container mx-auto px-4">
                            <div className="flex gap-1 overflow-x-auto hide-scrollbar">
                                {tabs.map(tab => {
                                    if (tab.masterOnly && !isMaster) {
                                                    return (
                                                            <button
                                                key={tab.id}
                                                onClick={() => setShowMasterLogin(true)}
                                                className="px-6 py-3 font-bold text-lg text-gray-400 hover:text-gray-600 transition-colors whitespace-nowrap flex items-center gap-2"
                                            >
                                                {React.createElement(tab.icon, { size: 20 })}
                                                {tab.label}
                                        </button>
                                                    );
                                                }
                                                return (
                                                            <button
                                            key={tab.id}
                                            onClick={() => setActiveTab(tab.id)}
                                            className={`px-6 py-3 font-bold text-lg transition-colors whitespace-nowrap flex items-center gap-2 relative ${
                                                activeTab === tab.id ? 'text-brand' : 'text-gray-400 hover:text-gray-600'
                                            }`}
                                        >
                                            {React.createElement(tab.icon, { size: 20 })}
                                            {tab.label}
                                            {activeTab === tab.id && (
                                                <div className="absolute bottom-0 left-0 w-full h-1 bg-brand rounded-t-full"></div>
                                            )}
                                                                        </button>
                                    );
                                })}
                                                        </div>
                                                        </div>
                                                        </div>
                    
                    {/* ì½˜í…ì¸  ì˜ì—­ */}
                    <div className="container mx-auto px-4 py-8">
                        <div className="bg-white rounded-3xl shadow-lg p-6 min-h-[500px]">
                            {activeTab === 'members' && (
                                <MembersTab members={members} setMembers={setMembers} addLog={addLog} currentUser={currentUser} />
                            )}
                            {activeTab === 'seminars' && (
                                <SeminarsTab seminars={seminars} setSeminars={setSeminars} addLog={addLog} currentUser={currentUser} />
                            )}
                            {activeTab === 'community' && (
                                <CommunityTab posts={posts} setPosts={setPosts} addLog={addLog} currentUser={currentUser} />
                            )}
                            {activeTab === 'inquiries' && (
                                <InquiriesTab addLog={addLog} currentUser={currentUser} />
                            )}
                            {activeTab === 'master' && isMaster && (
                                <MasterTab
                                    content={content}
                                    setContent={setContent}
                                    menuEnabled={menuEnabled}
                                    setMenuEnabled={setMenuEnabled}
                                    menuNames={menuNames}
                                    setMenuNames={setMenuNames}
                                    logs={logs}
                                    addLog={addLog}
                                    currentUser={currentUser}
                                    onDataReset={handleDataReset}
                                    onMigrate={migrateToFirestore}
                                />
                            )}
                            {activeTab === 'master' && !isMaster && (
                                <div className="text-center py-20">
                                    <Icons.Lock size={48} className="mx-auto text-gray-400 mb-4" />
                                    <p className="text-gray-500">ë§ˆìŠ¤í„° ëª¨ë“œ ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.</p>
                                </div>
                            )}
                                    </div>
                                                    </div>
                    
                    {/* ë§ˆìŠ¤í„° ë¡œê·¸ì¸ ëª¨ë‹¬ */}
                    {showMasterLogin && (
                        <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70">
                            <div className="bg-white rounded-3xl p-8 max-w-md w-full">
                                <div className="text-center mb-6">
                                    <Icons.Lock size={48} className="mx-auto text-gray-800 mb-4" />
                                    <h3 className="text-2xl font-bold text-dark mb-2">ë§ˆìŠ¤í„° ëª¨ë“œ</h3>
                                    <p className="text-sm text-gray-600">ê´€ë¦¬ì ì „ìš© ê¸°ëŠ¥ì…ë‹ˆë‹¤.<br/>ë¹„ë°€ ì½”ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”.</p>
                                                </div>
                                                        <input
                                    type="password"
                                    className="w-full p-4 border-2 border-gray-200 rounded-2xl text-center font-bold mb-6 focus:border-gray-800 focus:outline-none"
                                    value={masterPwInput}
                                    onChange={(e) => {
                                        const value = e.target.value;
                                        setMasterPwInput(value);
                                    }}
                                    placeholder="Master Code"
                                    onKeyPress={(e) => {
                                        if (e.key === 'Enter') {
                                            handleMasterLogin();
                                        }
                                    }}
                                    autoFocus
                                />
                                <div className="flex gap-4">
                                                        <button
                                        onClick={() => { setShowMasterLogin(false); setMasterPwInput(''); }}
                                        className="flex-1 py-4 bg-gray-100 text-gray-700 font-bold rounded-2xl hover:bg-gray-200 transition-colors"
                                                        >
                                        ì·¨ì†Œ
                                                        </button>
                                                                    <button
                                        onClick={handleMasterLogin}
                                        className="flex-1 py-4 bg-gray-800 text-white font-bold rounded-2xl hover:bg-gray-900 transition-colors"
                                                                    >
                                        í™•ì¸
                                                                    </button>
                                                        </div>
                                    </div>
                                            </div>
                    )}
                </div>
            );
        };

        // ==========================================
        // ê° íƒ­ ì»´í¬ë„ŒíŠ¸
        // ==========================================
        const MembersTab = ({ members, setMembers, addLog, currentUser }) => {
            const [isModalOpen, setIsModalOpen] = useState(false);
            const [editingItem, setEditingItem] = useState(null);
            const [formData, setFormData] = useState({ name: '', industry: '', role: '', company: '', img: '', memberGrade: 'ì¼ë°˜íšŒì›', approvalStatus: 'approved', isAdmin: false });
            
            const handleOpenModal = (item = null) => {
                if (item) {
                    setEditingItem(item);
                    setFormData(item);
                } else {
                    setEditingItem(null);
                    setFormData({ name: '', industry: '', role: '', company: '', img: '', memberGrade: 'ì¼ë°˜íšŒì›', approvalStatus: 'approved', isAdmin: false });
                }
                setIsModalOpen(true);
            };
            
            const handleCloseModal = () => {
                setIsModalOpen(false);
                setEditingItem(null);
                setFormData({ name: '', industry: '', role: '', company: '', img: '', memberGrade: 'ì¼ë°˜íšŒì›', approvalStatus: 'approved', isAdmin: false });
            };
            
            const handleSubmit = async () => {
                if (!formData.name || !formData.company) {
                    alert('ì´ë¦„ê³¼ íšŒì‚¬ëª…ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.');
                    return;
                }
                
                try {
                    if (editingItem) {
                        // Firestore ì—…ë°ì´íŠ¸
                        await firebaseDb.collection('users').doc(editingItem.id).update({
                            ...formData,
                            updatedAt: firebase.firestore.FieldValue.serverTimestamp()
                        });
                        
                        addLog('UPDATE', 'íšŒì›', `${currentUser?.name || 'ê´€ë¦¬ì'}ë‹˜ì´ íšŒì› ì •ë³´ë¥¼ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤.`, currentUser?.name, `íšŒì›: ${formData.name}`);
                    } else {
                        // Firestore ì¶”ê°€
                        await firebaseDb.collection('users').add({
                            ...formData,
                            createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                            updatedAt: firebase.firestore.FieldValue.serverTimestamp()
                        });
                        
                        addLog('CREATE', 'íšŒì›', `${currentUser?.name || 'ê´€ë¦¬ì'}ë‹˜ì´ íšŒì›ì„ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.`, currentUser?.name, `íšŒì›: ${formData.name}`);
                    }
                    handleCloseModal();
                } catch (error) {
                    console.error('íšŒì› ì €ì¥ ì˜¤ë¥˜:', error);
                    alert('íšŒì› ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
                }
            };
            
            const handleDelete = async (id) => {
                if (!confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                    return;
                }
                
                try {
                    const member = members.find(m => m.id === id);
                    
                    // Firestoreì—ì„œ ì‚­ì œ
                    await firebaseDb.collection('users').doc(id).delete();
                    
                    addLog('DELETE', 'íšŒì›', `${currentUser?.name || 'ê´€ë¦¬ì'}ë‹˜ì´ íšŒì›ì„ ì‚­ì œí–ˆìŠµë‹ˆë‹¤.`, currentUser?.name, `íšŒì›: ${member?.name || ''}`);
                } catch (error) {
                    console.error('íšŒì› ì‚­ì œ ì˜¤ë¥˜:', error);
                    alert('íšŒì› ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
                }
            };
            
            return (
                <div>
                    <div className="flex items-center justify-between mb-6">
                        <h2 className="text-2xl font-bold text-dark">íšŒì› ê´€ë¦¬</h2>
                        <button onClick={() => handleOpenModal()} className="flex items-center gap-2 px-4 py-2 bg-brand text-white rounded-lg font-bold hover:bg-blue-700 transition-colors">
                            <Icons.Plus size={20} />
                            íšŒì› ì¶”ê°€
                                                                            </button>
                                                                        </div>
                    
                    <div className="bg-white rounded-2xl border border-gray-200 overflow-hidden">
                        {members.length === 0 ? (
                            <div className="p-10 text-center text-gray-400">ë“±ë¡ëœ íšŒì›ì´ ì—†ìŠµë‹ˆë‹¤.</div>
                        ) : (
                            <table className="w-full">
                                <thead className="bg-gray-50 border-b border-gray-200">
                                    <tr>
                                        <th className="p-4 text-left text-sm font-bold text-gray-700">ì´ë¦„</th>
                                        <th className="p-4 text-left text-sm font-bold text-gray-700">íšŒì‚¬ëª…</th>
                                        <th className="p-4 text-left text-sm font-bold text-gray-700">ì—…ì¢…</th>
                                        <th className="p-4 text-left text-sm font-bold text-gray-700">ë“±ê¸‰</th>
                                        <th className="p-4 text-left text-sm font-bold text-gray-700">ìƒíƒœ</th>
                                        <th className="p-4 text-center text-sm font-bold text-gray-700">ì‘ì—…</th>
                                                                        </tr>
                                                                    </thead>
                                <tbody>
                                    {members.map((member, idx) => (
                                        <tr key={member.id || idx} className="border-b border-gray-100 hover:bg-gray-50">
                                            <td className="p-4">
                                                <div className="flex items-center gap-3">
                                                    <img src={member.img || `https://ui-avatars.com/api/?name=${member.name}&background=random`} alt={member.name} className="w-10 h-10 rounded-full object-cover" />
                                                    <span className="font-bold text-dark">{member.name}</span>
                                                </div>
                                                                                </td>
                                            <td className="p-4 text-gray-700">{member.company}</td>
                                            <td className="p-4 text-gray-600">{member.industry}</td>
                                                                                <td className="p-4">
                                                <span className={`text-xs px-2 py-1 rounded font-bold ${
                                                    member.memberGrade === 'íŒŒíŠ¸ë„ˆì‚¬' ? 'bg-purple-100 text-purple-700' :
                                                    member.memberGrade === 'ìš´ì˜ì§„' ? 'bg-blue-100 text-blue-700' :
                                                                                            'bg-gray-100 text-gray-700'
                                                                                        }`}>
                                                    {member.memberGrade || 'ì¼ë°˜íšŒì›'}
                                                                    </span>
                                                                                </td>
                                                                                <td className="p-4">
                                                <span className={`text-xs px-2 py-1 rounded font-bold ${
                                                    member.approvalStatus === 'approved' ? 'bg-green-100 text-green-700' : 'bg-yellow-100 text-yellow-700'
                                                }`}>
                                                    {member.approvalStatus === 'approved' ? 'ìŠ¹ì¸ë¨' : 'ëŒ€ê¸°ì¤‘'}
                                                </span>
                                                                                </td>
                                            <td className="p-4">
                                                <div className="flex items-center justify-center gap-2">
                                                    <button onClick={() => handleOpenModal(member)} className="p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors">
                                                        <Icons.Edit size={18} />
                                                                                        </button>
                                                    <button onClick={() => handleDelete(member.id)} className="p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors">
                                                        <Icons.Trash size={18} />
                                                                    </button>
                                                                </div>
                                                                                </td>
                                                                            </tr>
                                                        ))}
                                                                    </tbody>
                                                                </table>
                                                )}
                                            </div>
                    
                    {/* ëª¨ë‹¬ */}
                    {isModalOpen && (
                        <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70" onClick={(e) => e.target === e.currentTarget && handleCloseModal()}>
                            <div className="bg-white rounded-3xl p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto modal-scroll" onClick={(e) => e.stopPropagation()}>
                                <div className="flex items-center justify-between mb-6">
                                    <h3 className="text-2xl font-bold text-dark">{editingItem ? 'íšŒì› ìˆ˜ì •' : 'íšŒì› ì¶”ê°€'}</h3>
                                    <button onClick={handleCloseModal} className="p-2 hover:bg-gray-100 rounded-lg transition-colors">
                                        <Icons.X size={24} />
                                                            </button>
                                                        </div>
                                
                                            <div className="space-y-4">
                                                <div>
                                        <label className="block text-sm font-bold text-gray-700 mb-2">ì´ë¦„ *</label>
                                        <input type="text" className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none" value={formData.name} onChange={(e) => setFormData({...formData, name: e.target.value})} />
                                                        </div>
                                                                    <div>
                                        <label className="block text-sm font-bold text-gray-700 mb-2">íšŒì‚¬ëª… *</label>
                                        <input type="text" className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none" value={formData.company} onChange={(e) => setFormData({...formData, company: e.target.value})} />
                                                                    </div>
                                            <div className="grid grid-cols-2 gap-4">
                                                                    <div>
                                            <label className="block text-sm font-bold text-gray-700 mb-2">ì—…ì¢…</label>
                                            <input type="text" className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none" value={formData.industry} onChange={(e) => setFormData({...formData, industry: e.target.value})} />
                                                                    </div>
                                                                    <div>
                                            <label className="block text-sm font-bold text-gray-700 mb-2">ì§ì±…</label>
                                            <input type="text" className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none" value={formData.role} onChange={(e) => setFormData({...formData, role: e.target.value})} />
                                                                    </div>
                                                                    </div>
                                                <div>
                                        <label className="block text-sm font-bold text-gray-700 mb-2">í”„ë¡œí•„ ì´ë¯¸ì§€</label>
                                        <div className="flex gap-2 mb-2">
                                            <input type="text" className="flex-1 p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none" value={formData.img} onChange={(e) => setFormData({...formData, img: e.target.value})} placeholder="ì´ë¯¸ì§€ URL ì…ë ¥ ë˜ëŠ” íŒŒì¼ ì—…ë¡œë“œ" />
                                            <label className="px-4 py-3 bg-brand text-white rounded-xl cursor-pointer hover:bg-blue-700 transition-colors flex items-center gap-2 whitespace-nowrap">
                                                <Icons.Plus size={16} /> íŒŒì¼
                                                <input type="file" accept="image/*" className="hidden" onChange={async (e) => {
                                                    const file = e.target.files[0];
                                                    if (!file) return;
                                                    try {
                                                        const reader = new FileReader();
                                                        reader.onload = async (event) => {
                                                            const base64 = event.target.result.split(',')[1];
                                                            const uploadFormData = new FormData();
                                                            uploadFormData.append('key', IMGBB_API_KEY);
                                                            uploadFormData.append('image', base64);
                                                            const response = await fetch('https://api.imgbb.com/1/upload', { method: 'POST', body: uploadFormData });
                                                            const data = await response.json();
                                                            if (data.success) {
                                                                setFormData({...formData, img: data.data.url});
                                                            } else {
                                                                alert('ì´ë¯¸ì§€ ì—…ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                                                            }
                                                        };
                                                        reader.readAsDataURL(file);
                                                    } catch (error) {
                                                        console.error('ì´ë¯¸ì§€ ì—…ë¡œë“œ ì˜¤ë¥˜:', error);
                                                        alert('ì´ë¯¸ì§€ ì—…ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                                                    }
                                                }} />
                                            </label>
                                        </div>
                                        {formData.img && (
                                            <div className="mt-2 relative inline-block">
                                                <img src={formData.img} alt="ë¯¸ë¦¬ë³´ê¸°" className="w-20 h-20 object-cover rounded-full border-2 border-gray-200" />
                                                <button type="button" onClick={() => setFormData({...formData, img: ''})} className="absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600">
                                                    <Icons.X size={10} />
                                                </button>
                                            </div>
                                        )}
                                                                    </div>
                                    <div className="grid grid-cols-2 gap-4">
                                                <div>
                                            <label className="block text-sm font-bold text-gray-700 mb-2">íšŒì› ë“±ê¸‰</label>
                                            <select className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none" value={formData.memberGrade} onChange={(e) => setFormData({...formData, memberGrade: e.target.value})}>
                                                <option value="ì¼ë°˜íšŒì›">ì¼ë°˜íšŒì›</option>
                                                <option value="ìš´ì˜ì§„">ìš´ì˜ì§„</option>
                                                <option value="íŒŒíŠ¸ë„ˆì‚¬">íŒŒíŠ¸ë„ˆì‚¬</option>
                                            </select>
                                                                </div>
                                                <div>
                                            <label className="block text-sm font-bold text-gray-700 mb-2">ìŠ¹ì¸ ìƒíƒœ</label>
                                            <select className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none" value={formData.approvalStatus} onChange={(e) => setFormData({...formData, approvalStatus: e.target.value})}>
                                                <option value="approved">ìŠ¹ì¸ë¨</option>
                                                <option value="pending">ëŒ€ê¸°ì¤‘</option>
                                            </select>
                                                                        </div>
                                                                    </div>
                                                <div>
                                        <label className="flex items-center gap-2">
                                            <input type="checkbox" checked={formData.isAdmin || false} onChange={(e) => setFormData({...formData, isAdmin: e.target.checked})} />
                                            <span className="text-sm font-bold text-gray-700">ê´€ë¦¬ì ê¶Œí•œ</span>
                                        </label>
                                                                    </div>
                                                                    </div>
                                
                                <div className="flex gap-4 mt-8">
                                    <button onClick={handleCloseModal} className="flex-1 py-4 bg-gray-100 text-gray-700 font-bold rounded-xl hover:bg-gray-200 transition-colors">
                                        ì·¨ì†Œ
                                                                        </button>
                                    <button onClick={handleSubmit} className="flex-1 py-4 bg-brand text-white font-bold rounded-xl hover:bg-blue-700 transition-colors">
                                        {editingItem ? 'ìˆ˜ì •' : 'ì¶”ê°€'}
                                                                        </button>
                                                                    </div>
                                                                </div>
                                        </div>
                                    )}
                                </div>
            );
        };
        
        const SeminarsTab = ({ seminars, setSeminars, addLog, currentUser }) => {
            const [isModalOpen, setIsModalOpen] = useState(false);
            const [editingItem, setEditingItem] = useState(null);
            const [formData, setFormData] = useState({ title: '', category: 'êµìœ¡/ì„¸ë¯¸ë‚˜', date: '', location: '', locationAddress: '', locationLat: null, locationLng: null, desc: '', images: [], price: 0, requiresPayment: false, maxParticipants: 50, currentParticipants: 0 });
            const [selectedSeminarForApplications, setSelectedSeminarForApplications] = useState(null);
            const [applications, setApplications] = useState([]);
            const [showMapModal, setShowMapModal] = useState(false); // ì§€ë„ ëª¨ë‹¬ ìƒíƒœ
            
            // ì„¸ë¯¸ë‚˜ ì‹ ì²­ ì •ë³´ ë¡œë“œ ë° ì—…ë°ì´íŠ¸
            useEffect(() => {
                const loadSeminarApplications = () => {
                    try {
                        const stored = localStorage.getItem('busan_ycc_seminar_applications');
                        return stored ? JSON.parse(stored) : [];
                                                                } catch (error) {
                        console.error('ì„¸ë¯¸ë‚˜ ì‹ ì²­ ì •ë³´ ë¡œë“œ ì˜¤ë¥˜:', error);
                        return [];
                    }
                };
                setApplications(loadSeminarApplications());
                
                // ì£¼ê¸°ì ìœ¼ë¡œ ì—…ë°ì´íŠ¸ (2ì´ˆë§ˆë‹¤)
                const interval = setInterval(() => {
                    setApplications(loadSeminarApplications());
                }, 2000);
                
                return () => clearInterval(interval);
            }, []);
            
            const handleOpenModal = (item = null) => {
                if (item) {
                    setEditingItem(item);
                    // ê¸°ì¡´ ë°ì´í„° í˜¸í™˜ì„±: img í•„ë“œë¥¼ images ë°°ì—´ë¡œ ë³€í™˜
                    const images = item.images || (item.img ? [item.img] : []);
                    setFormData({...item, images});
                } else {
                    setEditingItem(null);
                    setFormData({ title: '', category: 'êµìœ¡/ì„¸ë¯¸ë‚˜', date: '', location: '', locationAddress: '', locationLat: null, locationLng: null, desc: '', images: [], price: 0, requiresPayment: false, maxParticipants: 50, currentParticipants: 0 });
                }
                setIsModalOpen(true);
            };
            
            const handleCloseModal = () => {
                setIsModalOpen(false);
                setEditingItem(null);
            };
            
            const handleSubmit = async () => {
                if (!formData.title || !formData.date) {
                    alert('ì œëª©ê³¼ ë‚ ì§œëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤.');
                    return;
                }
                
                try {
                    const status = calculateStatus(formData.date);
                    const img = (formData.images && formData.images.length > 0) ? formData.images[0] : '';
                    const seminarData = { ...formData, status, img };
                    
                    if (editingItem) {
                        // Firestore ì—…ë°ì´íŠ¸
                        await firebaseDb.collection('seminars').doc(editingItem.id).update({
                            ...seminarData,
                            updatedAt: firebase.firestore.FieldValue.serverTimestamp()
                        });
                        
                        addLog('UPDATE', 'í”„ë¡œê·¸ë¨', `${currentUser?.name || 'ê´€ë¦¬ì'}ë‹˜ì´ í”„ë¡œê·¸ë¨ì„ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤.`, currentUser?.name, `í”„ë¡œê·¸ë¨: ${formData.title}`);
                    } else {
                        // Firestore ì¶”ê°€
                        await firebaseDb.collection('seminars').add({
                            ...seminarData,
                            createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                            updatedAt: firebase.firestore.FieldValue.serverTimestamp()
                        });
                        
                        addLog('CREATE', 'í”„ë¡œê·¸ë¨', `${currentUser?.name || 'ê´€ë¦¬ì'}ë‹˜ì´ í”„ë¡œê·¸ë¨ì„ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.`, currentUser?.name, `í”„ë¡œê·¸ë¨: ${formData.title}`);
                    }
                    handleCloseModal();
                } catch (error) {
                    console.error('í”„ë¡œê·¸ë¨ ì €ì¥ ì˜¤ë¥˜:', error);
                    alert('í”„ë¡œê·¸ë¨ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
                }
            };
            
            const handleDelete = async (id) => {
                if (!confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                    return;
                }
                
                try {
                    const seminar = seminars.find(s => s.id === id);
                    
                    // Firestoreì—ì„œ ì‚­ì œ
                    await firebaseDb.collection('seminars').doc(id).delete();
                    
                    addLog('DELETE', 'í”„ë¡œê·¸ë¨', `${currentUser?.name || 'ê´€ë¦¬ì'}ë‹˜ì´ í”„ë¡œê·¸ë¨ì„ ì‚­ì œí–ˆìŠµë‹ˆë‹¤.`, currentUser?.name, `í”„ë¡œê·¸ë¨: ${seminar?.title || ''}`);
                } catch (error) {
                    console.error('í”„ë¡œê·¸ë¨ ì‚­ì œ ì˜¤ë¥˜:', error);
                    alert('í”„ë¡œê·¸ë¨ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
                }
            };
            
            return (
                                                <div>
                    <div className="flex items-center justify-between mb-6">
                        <h2 className="text-2xl font-bold text-dark">í”„ë¡œê·¸ë¨ ê´€ë¦¬</h2>
                        <button onClick={() => handleOpenModal()} className="flex items-center gap-2 px-4 py-2 bg-brand text-white rounded-lg font-bold hover:bg-blue-700 transition-colors">
                            <Icons.Plus size={20} />
                            í”„ë¡œê·¸ë¨ ì¶”ê°€
                        </button>
                                                </div>

                    <div className="bg-white rounded-2xl border border-gray-200 overflow-hidden">
                        {seminars.length === 0 ? (
                            <div className="p-10 text-center text-gray-400">ë“±ë¡ëœ í”„ë¡œê·¸ë¨ì´ ì—†ìŠµë‹ˆë‹¤.</div>
                        ) : (
                            <table className="w-full">
                                <thead className="bg-gray-50 border-b border-gray-200">
                                    <tr>
                                        <th className="p-4 text-left text-sm font-bold text-gray-700">ì œëª©</th>
                                        <th className="p-4 text-left text-sm font-bold text-gray-700">ì¹´í…Œê³ ë¦¬</th>
                                        <th className="p-4 text-left text-sm font-bold text-gray-700">ë‚ ì§œ</th>
                                        <th className="p-4 text-left text-sm font-bold text-gray-700">ìƒíƒœ</th>
                                        <th className="p-4 text-center text-sm font-bold text-gray-700">ì‹ ì²­ì</th>
                                        <th className="p-4 text-center text-sm font-bold text-gray-700">ì‘ì—…</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {seminars.map((seminar, idx) => {
                                        const seminarApplications = applications.filter(app => app.seminarId === seminar.id);
                                        return (
                                            <tr key={seminar.id || idx} className="border-b border-gray-100 hover:bg-gray-50">
                                                <td className="p-4 font-bold text-dark">{seminar.title}</td>
                                                <td className="p-4 text-gray-600">{seminar.category}</td>
                                                <td className="p-4 text-gray-600">{seminar.date}</td>
                                                <td className="p-4">
                                                    <span className={`text-xs px-2 py-1 rounded font-bold ${
                                                        seminar.status === 'ì¢…ë£Œ' ? 'bg-gray-100 text-gray-700' :
                                                        seminar.status === 'ë§ˆê°ì„ë°•' ? 'bg-red-100 text-red-700' :
                                                        'bg-green-100 text-green-700'
                                                    }`}>
                                                        {seminar.status}
                                                    </span>
                                                </td>
                                                <td className="p-4 text-center">
                                                                <button 
                                                        onClick={() => setSelectedSeminarForApplications(seminar)}
                                                        className="text-brand font-bold hover:underline"
                                                    >
                                                        {seminarApplications.length}ëª…
                                                    </button>
                                                </td>
                                                <td className="p-4">
                                                    <div className="flex items-center justify-center gap-2">
                                                        <button onClick={() => handleOpenModal(seminar)} className="p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors">
                                                            <Icons.Edit size={18} />
                                                        </button>
                                                        <button onClick={() => handleDelete(seminar.id)} className="p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors">
                                                            <Icons.Trash size={18} />
                                                                </button>
                                                            </div>
                                                </td>
                                            </tr>
                                        );
                                    })}
                                </tbody>
                            </table>
                        )}
                                        </div>
                                        
                    {/* ì‹ ì²­ ì •ë³´ ëª¨ë‹¬ */}
                    {selectedSeminarForApplications && (
                        <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70" onClick={(e) => e.target === e.currentTarget && setSelectedSeminarForApplications(null)}>
                            <div className="bg-white rounded-3xl p-8 max-w-4xl w-full max-h-[90vh] overflow-y-auto modal-scroll" onClick={(e) => e.stopPropagation()}>
                                <div className="flex items-center justify-between mb-6">
                                    <h3 className="text-2xl font-bold text-dark">{selectedSeminarForApplications.title} - ì‹ ì²­ì ëª©ë¡</h3>
                                    <button onClick={() => setSelectedSeminarForApplications(null)} className="p-2 hover:bg-gray-100 rounded-lg transition-colors">
                                        <Icons.X size={24} />
                                    </button>
                                                </div>
                                {(() => {
                                    const seminarApps = applications.filter(app => app.seminarId === selectedSeminarForApplications.id);
                                    if (seminarApps.length === 0) {
                                        return <div className="text-center py-10 text-gray-400">ì‹ ì²­ìê°€ ì—†ìŠµë‹ˆë‹¤.</div>;
                                    }
                                    return (
                                        <div className="space-y-4">
                                            {seminarApps.map((app, idx) => (
                                                <div key={idx} className="border border-gray-200 rounded-xl p-6 bg-gray-50">
                                                    <div className="flex items-start justify-between mb-4">
                                                <div>
                                                            <h4 className="font-bold text-dark text-lg mb-1">{app.userName}</h4>
                                                            <p className="text-sm text-gray-600">{app.userEmail}</p>
                                                            <p className="text-xs text-gray-500 mt-1">ì‹ ì²­ì¼: {new Date(app.appliedAt).toLocaleString('ko-KR')}</p>
                                                </div>
                                                        <span className={`text-xs px-3 py-1 rounded font-bold ${
                                                            app.status === 'approved' ? 'bg-green-100 text-green-700' :
                                                            app.status === 'rejected' ? 'bg-red-100 text-red-700' :
                                                            'bg-yellow-100 text-yellow-700'
                                                        }`}>
                                                            {app.status === 'approved' ? 'ìŠ¹ì¸' : app.status === 'rejected' ? 'ê±°ë¶€' : 'ëŒ€ê¸°ì¤‘'}
                                                        </span>
                                                </div>
                                                    <div className="space-y-3">
                                                <div>
                                                            <h5 className="font-bold text-gray-700 mb-2">ì‹ ì²­ì‚¬ìœ </h5>
                                                            <p className="text-sm text-gray-600 bg-white p-3 rounded-lg border border-gray-200">{app.applicationReason}</p>
                                                </div>
                                                <div>
                                                            <h5 className="font-bold text-gray-700 mb-2">ì‚¬ì „ì§ˆë¬¸</h5>
                                                            <div className="space-y-2 bg-white p-3 rounded-lg border border-gray-200">
                                                                {app.questions.map((q, qIdx) => (
                                                                    <div key={qIdx} className="text-sm text-gray-600">
                                                                        <span className="font-bold text-gray-700">Q{qIdx + 1}.</span> {q}
                                                </div>
                                                                ))}
                                                </div>
                                                </div>
                                                </div>
                                            </div>
                                            ))}
                                                        </div>
                                    );
                                })()}
                                                            </div>
                                                        </div>
                                                    )}
                                        
                    {/* ëª¨ë‹¬ */}
                    {isModalOpen && (
                        <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70" onClick={(e) => e.target === e.currentTarget && handleCloseModal()}>
                            <div className="bg-white rounded-3xl p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto modal-scroll" onClick={(e) => e.stopPropagation()}>
                                <div className="flex items-center justify-between mb-6">
                                    <h3 className="text-2xl font-bold text-dark">{editingItem ? 'í”„ë¡œê·¸ë¨ ìˆ˜ì •' : 'í”„ë¡œê·¸ë¨ ì¶”ê°€'}</h3>
                                    <button onClick={handleCloseModal} className="p-2 hover:bg-gray-100 rounded-lg transition-colors">
                                        <Icons.X size={24} />
                                                            </button>
                                        </div>

                                            <div className="space-y-4">
                                                <div>
                                        <label className="block text-sm font-bold text-gray-700 mb-2">ì œëª© *</label>
                                        <input type="text" className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none" value={formData.title} onChange={(e) => setFormData({...formData, title: e.target.value})} />
                                                </div>
                                    <div className="grid grid-cols-2 gap-4">
                                                <div>
                                            <label className="block text-sm font-bold text-gray-700 mb-2">ì¹´í…Œê³ ë¦¬</label>
                                            <select className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none" value={formData.category} onChange={(e) => setFormData({...formData, category: e.target.value})}>
                                                    <option value="êµìœ¡/ì„¸ë¯¸ë‚˜">êµìœ¡/ì„¸ë¯¸ë‚˜</option>
                                                    <option value="íˆ¬ì/IR">íˆ¬ì/IR</option>
                                                <option value="ë„¤íŠ¸ì›Œí‚¹/ëª¨ì„">ë„¤íŠ¸ì›Œí‚¹/ëª¨ì„</option>
                                                </select>
                                                </div>
                                                <div>
                                            <label className="block text-sm font-bold text-gray-700 mb-2">ì¼ì‹œ *</label>
                                            <DateTimePicker 
                                                value={formData.date} 
                                                onChange={(val) => setFormData({...formData, date: val})} 
                                                placeholder="ë‚ ì§œì™€ ì‹œê°„ì„ ì„ íƒí•˜ì„¸ìš”"
                                            />
                                                </div>
                                                    </div>
                                                    <div>
                                        <label className="block text-sm font-bold text-gray-700 mb-2">ì¥ì†Œ</label>
                                        <div className="flex gap-2">
                                            <input type="text" className="flex-1 p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none" value={formData.location} onChange={(e) => setFormData({...formData, location: e.target.value})} placeholder="ì¥ì†Œëª… ë˜ëŠ” ì£¼ì†Œ ì…ë ¥" />
                                            <button type="button" onClick={() => setShowMapModal(true)} className="px-4 py-3 bg-green-600 text-white rounded-xl font-bold hover:bg-green-700 transition-colors flex items-center gap-2 whitespace-nowrap">
                                                <Icons.MapPin size={16} /> ì§€ë„ ì„ íƒ
                                            </button>
                                        </div>
                                        {formData.locationAddress && (
                                            <div className="mt-2 p-3 bg-green-50 border border-green-200 rounded-xl">
                                                <p className="text-xs text-green-700">{formData.locationAddress}</p>
                                                {formData.locationLat && formData.locationLng && (
                                                    <p className="text-xs text-gray-500 mt-1">ì¢Œí‘œ: {formData.locationLat.toFixed(6)}, {formData.locationLng.toFixed(6)}</p>
                                                )}
                                            </div>
                                        )}
                                                    </div>
                                                    <div>
                                        <label className="block text-sm font-bold text-gray-700 mb-2">ì„¤ëª…</label>
                                        <textarea className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none h-24 resize-none" value={formData.desc} onChange={(e) => setFormData({...formData, desc: e.target.value})} />
                                                </div>
                                                <div>
                                        <label className="block text-sm font-bold text-gray-700 mb-2">í”„ë¡œê·¸ë¨ ì´ë¯¸ì§€ (ìµœëŒ€ 3ì¥, ì²« ë²ˆì§¸ ì´ë¯¸ì§€ê°€ ëŒ€í‘œ ì´ë¯¸ì§€)</label>
                                        <div className="flex gap-4 flex-wrap">
                                            {(formData.images || []).map((img, idx) => (
                                                <div key={idx} className="relative">
                                                    <img src={img} alt={`í”„ë¡œê·¸ë¨ ì´ë¯¸ì§€ ${idx + 1}`} className="w-24 h-32 object-cover rounded-xl border-2 border-gray-200" style={{ aspectRatio: '3/4' }} />
                                                    <button type="button" onClick={() => setFormData({...formData, images: formData.images.filter((_, i) => i !== idx)})} className="absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600">
                                                        <Icons.X size={12} />
                                                    </button>
                                                    {idx === 0 && <span className="absolute bottom-1 left-1 text-[10px] bg-brand text-white px-1.5 py-0.5 rounded">ëŒ€í‘œ</span>}
                                                </div>
                                            ))}
                                            {(formData.images || []).length < 3 && (
                                                <label className="w-24 h-32 border-2 border-dashed border-gray-300 rounded-xl flex flex-col items-center justify-center cursor-pointer hover:border-brand transition-colors" style={{ aspectRatio: '3/4' }}>
                                                    <Icons.Plus size={24} className="text-gray-400 mb-1" />
                                                    <span className="text-xs text-gray-500">ì‚¬ì§„ ì¶”ê°€</span>
                                                    <input type="file" accept="image/*" className="hidden" onChange={async (e) => {
                                                        const file = e.target.files[0];
                                                        if (!file) return;
                                                        try {
                                                            const reader = new FileReader();
                                                            reader.onload = async (event) => {
                                                                const base64 = event.target.result.split(',')[1];
                                                                const uploadFormData = new FormData();
                                                                uploadFormData.append('key', IMGBB_API_KEY);
                                                                uploadFormData.append('image', base64);
                                                                const response = await fetch('https://api.imgbb.com/1/upload', { method: 'POST', body: uploadFormData });
                                                                const data = await response.json();
                                                                if (data.success) {
                                                                    setFormData({...formData, images: [...(formData.images || []), data.data.url]});
                                                                } else {
                                                                    alert('ì´ë¯¸ì§€ ì—…ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                                                                }
                                                            };
                                                            reader.readAsDataURL(file);
                                                        } catch (error) {
                                                            console.error('ì´ë¯¸ì§€ ì—…ë¡œë“œ ì˜¤ë¥˜:', error);
                                                            alert('ì´ë¯¸ì§€ ì—…ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                                                        }
                                                        e.target.value = '';
                                                    }} />
                                                </label>
                                            )}
                                        </div>
                                                </div>
                                    <div className="grid grid-cols-3 gap-4">
                                                <div>
                                            <label className="block text-sm font-bold text-gray-700 mb-2">ê°€ê²©</label>
                                            <input type="number" className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none" value={formData.price} onChange={(e) => setFormData({...formData, price: parseInt(e.target.value) || 0})} />
                                                </div>
                                                <div>
                                            <label className="block text-sm font-bold text-gray-700 mb-2">ìµœëŒ€ ì¸ì›</label>
                                            <input type="number" className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none" value={formData.maxParticipants} onChange={(e) => setFormData({...formData, maxParticipants: parseInt(e.target.value) || 0})} />
                                                </div>
                                                <div>
                                            <label className="block text-sm font-bold text-gray-700 mb-2">í˜„ì¬ ì¸ì›</label>
                                            <input type="number" className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none" value={formData.currentParticipants} onChange={(e) => setFormData({...formData, currentParticipants: parseInt(e.target.value) || 0})} />
                                                </div>
                                            </div>
                                                <div>
                                        <label className="flex items-center gap-2">
                                            <input type="checkbox" checked={formData.requiresPayment || false} onChange={(e) => setFormData({...formData, requiresPayment: e.target.checked})} />
                                            <span className="text-sm font-bold text-gray-700">ê²°ì œ í•„ìš”</span>
                                        </label>
                                                </div>
                                                </div>

                                <div className="flex gap-4 mt-8">
                                    <button onClick={handleCloseModal} className="flex-1 py-4 bg-gray-100 text-gray-700 font-bold rounded-xl hover:bg-gray-200 transition-colors">
                                        ì·¨ì†Œ
                                    </button>
                                    <button onClick={handleSubmit} className="flex-1 py-4 bg-brand text-white font-bold rounded-xl hover:bg-blue-700 transition-colors">
                                        {editingItem ? 'ìˆ˜ì •' : 'ì¶”ê°€'}
                                                                </button>
                                                            </div>
                                                                </div>
                                                            </div>
                                                        )}
                                                        
                                    {/* ì¹´ì¹´ì˜¤ ì§€ë„ ëª¨ë‹¬ */}
                                    {showMapModal && (
                                        <KakaoMapModal
                                            onClose={() => setShowMapModal(false)}
                                            onSelectLocation={(place) => {
                                                setFormData({
                                                    ...formData,
                                                    location: place.name || place.address,
                                                    locationAddress: place.address,
                                                    locationLat: place.lat,
                                                    locationLng: place.lng
                                                });
                                            }}
                                            initialLocation={formData.locationLat && formData.locationLng ? {
                                                lat: formData.locationLat,
                                                lng: formData.locationLng,
                                                address: formData.locationAddress,
                                                name: formData.location
                                            } : null}
                                        />
                                    )}
                                                    </div>
            );
        };

        const CommunityTab = ({ posts, setPosts, addLog, currentUser }) => {
            const [isModalOpen, setIsModalOpen] = useState(false);
            const [editingItem, setEditingItem] = useState(null);
            const [uploadingImages, setUploadingImages] = useState(false);
            const [formData, setFormData] = useState({ 
                category: 'ê³µì§€ì‚¬í•­', 
                title: '', 
                content: '', 
                author: '', 
                isSecret: false, 
                password: '',
                // ì¸ë ¥êµ¬ì¸ í•„ë“œ
                jobDetails: '',
                recruitCount: '',
                workHours: '',
                salary: '',
                preferred: '',
                deadline: '',
                storeLocation: '',
                storePhone: '',
                storeImages: [],
                    // ì¤‘ê³ ê±°ë˜ í•„ë“œ
                itemName: '',
                itemCategory: '',
                price: '',
                itemCondition: '',
                tradeMethod: '',
                tradeLocation: '',
                itemImages: [],
                businessNumber: '',
                // í”„ë¡œê·¸ë¨ í›„ê¸° í•„ë“œ
                rating: 0,
                reviewImages: [],
                seminarTitle: null
            });
            const [selectedCategory, setSelectedCategory] = useState('ì „ì²´');
            
            const categories = ['ì „ì²´', 'ê³µì§€ì‚¬í•­', 'ì¸ë ¥êµ¬ì¸', 'í”„ë¡œê·¸ë¨ í›„ê¸°', 'ê±´ì˜ì‚¬í•­', 'ì¤‘ê³ ê±°ë˜'];
            const filteredPosts = selectedCategory === 'ì „ì²´' ? posts : posts.filter(p => p.category === selectedCategory);
            
            // ì´ë¯¸ì§€ ì—…ë¡œë“œ í•¨ìˆ˜
            const uploadImageToImgBB = async (file) => {
                return new Promise((resolve, reject) => {
                    const reader = new FileReader();
                    reader.onload = async (e) => {
                        const base64 = e.target.result.split(',')[1];
                        try {
                            const formData = new FormData();
                            formData.append('key', IMGBB_API_KEY);
                            formData.append('image', base64);
                            const response = await fetch('https://api.imgbb.com/1/upload', {
                                method: 'POST',
                                body: formData
                            });
                            const data = await response.json();
                            if (data.success) {
                                resolve(data.data.url);
                            } else {
                                reject(new Error('ì´ë¯¸ì§€ ì—…ë¡œë“œ ì‹¤íŒ¨'));
                    }
                } catch (error) {
                            reject(error);
                        }
                    };
                    reader.readAsDataURL(file);
                });
            };

            const handleOpenModal = (item = null) => {
                if (item) {
                    setEditingItem(item);
                    setFormData({ 
                        category: item.category, 
                        title: item.title, 
                        content: item.content, 
                        author: item.author, 
                        isSecret: item.isSecret || false, 
                        password: item.password || '',
                        // ì¸ë ¥êµ¬ì¸ í•„ë“œ
                        jobDetails: item.jobDetails || '',
                        recruitCount: item.recruitCount || '',
                        workHours: item.workHours || '',
                        salary: item.salary || '',
                        preferred: item.preferred || '',
                        deadline: item.deadline || '',
                        storeLocation: item.storeLocation || '',
                        storePhone: item.storePhone || '',
                        storeImages: item.storeImages || [],
                        // ì¤‘ê³ ê±°ë˜ í•„ë“œ
                        itemName: item.itemName || '',
                        itemCategory: item.itemCategory || '',
                        price: item.price || '',
                        itemCondition: item.itemCondition || '',
                        tradeMethod: item.tradeMethod || '',
                        tradeLocation: item.tradeLocation || '',
                        itemImages: item.itemImages || [],
                        businessNumber: item.businessNumber || '',
                        // í”„ë¡œê·¸ë¨ í›„ê¸° í•„ë“œ
                        rating: item.rating || 0,
                        reviewImages: item.reviewImages || [],
                        seminarId: item.seminarId || null,
                        seminarTitle: item.seminarTitle || null
                    });
                } else {
                    setEditingItem(null);
                    setFormData({ 
                        category: 'ê³µì§€ì‚¬í•­', 
                        title: '', 
                        content: '', 
                        author: currentUser?.name || 'ê´€ë¦¬ì', 
                        isSecret: false, 
                        password: '',
                        // ì¸ë ¥êµ¬ì¸ í•„ë“œ
                        jobDetails: '',
                        recruitCount: '',
                        workHours: '',
                        salary: '',
                        preferred: '',
                        deadline: '',
                        storeLocation: '',
                        storePhone: '',
                        storeImages: [],
                        // ì¤‘ê³ ê±°ë˜ í•„ë“œ
                        itemName: '',
                        itemCategory: '',
                        price: '',
                        itemCondition: '',
                        tradeMethod: '',
                        tradeLocation: '',
                        itemImages: [],
                        businessNumber: '',
                        // í”„ë¡œê·¸ë¨ í›„ê¸° í•„ë“œ
                        rating: 0,
                        reviewImages: [],
                        seminarId: null,
                        seminarTitle: null
                    });
                }
                setIsModalOpen(true);
            };
            
            const handleCloseModal = () => {
                setIsModalOpen(false);
                setEditingItem(null);
            };
            
            const handleSubmit = async () => {
                if (!formData.title || !formData.content) {
                    alert('ì œëª©ê³¼ ë‚´ìš©ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.');
                    return;
                }
                
                try {
                    if (editingItem) {
                        const updatedPost = {
                            ...formData,
                            id: editingItem.id,
                            date: editingItem.date,
                            views: editingItem.views || 0,
                            likes: editingItem.likes || 0,
                            comments: editingItem.comments || [],
                            reply: editingItem.reply || null,
                            author: formData.author || editingItem.author || currentUser?.name || 'ê´€ë¦¬ì'
                        };
                        const updated = posts.map(p => p.id === editingItem.id ? updatedPost : p);
                        setPosts(updated);
                        
                        // Google Sheetsì— ì €ì¥ (Google Apps Script ì‚¬ìš©)
                        if (typeof updatePostInSheet === 'function') {
                            await updatePostInSheet(editingItem.id, updatedPost);
                        }
                        
                        addLog('UPDATE', 'ê²Œì‹œê¸€', `${currentUser?.name || 'ê´€ë¦¬ì'}ë‹˜ì´ ê²Œì‹œê¸€ì„ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤.`, currentUser?.name, `ê²Œì‹œê¸€: ${formData.title}`);
                    } else {
                        const newPost = { 
                            ...formData, 
                            id: Date.now(), 
                            date: new Date().toISOString().slice(0, 10).replace(/-/g, '.'), 
                            views: 0, 
                            likes: 0, 
                            comments: [],
                            reply: null,
                            author: formData.author || currentUser?.name || 'ê´€ë¦¬ì'
                        };
                        setPosts([newPost, ...posts]);
                        
                        // Google Sheetsì— ì €ì¥ (Google Apps Script ì‚¬ìš©)
                        if (typeof addPostToSheet === 'function') {
                            await addPostToSheet(newPost);
                        }
                        
                        addLog('CREATE', 'ê²Œì‹œê¸€', `${currentUser?.name || 'ê´€ë¦¬ì'}ë‹˜ì´ ê²Œì‹œê¸€ì„ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.`, currentUser?.name, `ê²Œì‹œê¸€: ${formData.title}`);
                    }
                    handleCloseModal();
                } catch (error) {
                    console.error('ê²Œì‹œê¸€ ì €ì¥ ì˜¤ë¥˜:', error);
                    alert('ê²Œì‹œê¸€ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
                }
            };
            
            const handleDelete = async (id) => {
                if (!confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                    return;
                }
                
                try {
                    const post = posts.find(p => p.id === id);
                    setPosts(posts.filter(p => p.id !== id));
                    
                    // Google Sheetsì—ì„œ ì‚­ì œ (Google Apps Script ì‚¬ìš©)
                    if (typeof deletePostFromSheet === 'function') {
                        await deletePostFromSheet(id);
                    }
                    
                    addLog('DELETE', 'ê²Œì‹œê¸€', `${currentUser?.name || 'ê´€ë¦¬ì'}ë‹˜ì´ ê²Œì‹œê¸€ì„ ì‚­ì œí–ˆìŠµë‹ˆë‹¤.`, currentUser?.name, `ê²Œì‹œê¸€: ${post?.title || ''}`);
                } catch (error) {
                    console.error('ê²Œì‹œê¸€ ì‚­ì œ ì˜¤ë¥˜:', error);
                    alert('ê²Œì‹œê¸€ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
                }
            };
                            
                            return (
                            <div>
                    <div className="flex items-center justify-between mb-6">
                        <h2 className="text-2xl font-bold text-dark">ì»¤ë®¤ë‹ˆí‹° ê´€ë¦¬</h2>
                        <button onClick={() => handleOpenModal()} className="flex items-center gap-2 px-4 py-2 bg-brand text-white rounded-lg font-bold hover:bg-blue-700 transition-colors">
                            <Icons.Plus size={20} />
                            ê²Œì‹œê¸€ ì¶”ê°€
                                            </button>
                                    </div>

                    {/* ì¹´í…Œê³ ë¦¬ í•„í„° */}
                    <div className="flex gap-2 mb-4 flex-wrap">
                        {categories.map(cat => (
                                            <button
                                key={cat}
                                onClick={() => setSelectedCategory(cat)}
                                className={`px-4 py-2 rounded-lg font-bold text-sm transition-colors ${
                                    selectedCategory === cat ? 'bg-brand text-white' : 'bg-gray-100 text-gray-600 hover:bg-gray-200'
                                }`}
                            >
                                {cat}
                                            </button>
                                        ))}
                                    </div>
                    
                    <div className="bg-white rounded-2xl border border-gray-200 overflow-hidden">
                        {filteredPosts.length === 0 ? (
                            <div className="p-10 text-center text-gray-400">ë“±ë¡ëœ ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</div>
                        ) : (
                            <table className="w-full">
                                <thead className="bg-gray-50 border-b border-gray-200">
                                    <tr>
                                        <th className="p-4 text-left text-sm font-bold text-gray-700">ì¹´í…Œê³ ë¦¬</th>
                                        <th className="p-4 text-left text-sm font-bold text-gray-700">ì œëª©</th>
                                        <th className="p-4 text-left text-sm font-bold text-gray-700">ì‘ì„±ì</th>
                                        <th className="p-4 text-left text-sm font-bold text-gray-700">ë‚ ì§œ</th>
                                        <th className="p-4 text-center text-sm font-bold text-gray-700">ì‘ì—…</th>
                                    </tr>
                                </thead>
                                <tbody>
                                        {filteredPosts.map((post, idx) => (
                                        <tr key={post.id || idx} className="border-b border-gray-100 hover:bg-gray-50">
                                            <td className="p-4">
                                                <span className="text-xs px-2 py-1 rounded font-bold bg-blue-100 text-blue-700">{post.category}</span>
                                            </td>
                                            <td className="p-4">
                                                <div className="flex items-center gap-2">
                                                    <span className="font-bold text-dark">{post.title}</span>
                                                    {post.isSecret && <Icons.Lock size={14} className="text-gray-400" />}
                                                    </div>
                                            </td>
                                            <td className="p-4 text-gray-600">{post.author}</td>
                                            <td className="p-4 text-gray-600 text-sm">{post.date}</td>
                                            <td className="p-4">
                                                <div className="flex items-center justify-center gap-2">
                                                    <button onClick={() => handleOpenModal(post)} className="p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors">
                                                        <Icons.Edit size={18} />
                                                        </button>
                                                    <button onClick={() => handleDelete(post.id)} className="p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors">
                                                        <Icons.Trash size={18} />
                                                        </button>
                                                    </div>
                                            </td>
                                        </tr>
                                    ))}
                                </tbody>
                            </table>
                        )}
                    </div>
                    
                    {/* ëª¨ë‹¬ */}
                    {isModalOpen && (
                        <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70" onClick={(e) => e.target === e.currentTarget && handleCloseModal()}>
                            <div className="bg-white rounded-3xl p-8 max-w-3xl w-full max-h-[90vh] overflow-y-auto modal-scroll" onClick={(e) => e.stopPropagation()}>
                                <div className="flex items-center justify-between mb-6">
                                    <h3 className="text-2xl font-bold text-dark">{editingItem ? 'ê²Œì‹œê¸€ ìˆ˜ì •' : 'ê²Œì‹œê¸€ ì¶”ê°€'}</h3>
                                    <button onClick={handleCloseModal} className="p-2 hover:bg-gray-100 rounded-lg transition-colors">
                                    <Icons.X size={24} />
                                </button>
                                    </div>
                                
                                <div className="space-y-4">
                                    <div className="grid grid-cols-2 gap-4">
                                                    <div>
                                            <label className="block text-sm font-bold text-gray-700 mb-2">ì¹´í…Œê³ ë¦¬</label>
                                            <select className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none" value={formData.category} onChange={(e) => {
                                                const newCategory = e.target.value;
                                                setFormData({
                                                    ...formData,
                                                    category: newCategory,
                                                    // ì¹´í…Œê³ ë¦¬ ë³€ê²½ ì‹œ ê´€ë ¨ í•„ë“œ ì´ˆê¸°í™”
                                                    storeImages: [],
                                                    itemImages: [],
                                                    reviewImages: [],
                                                    businessNumber: '',
                                                    rating: 0
                                                });
                                            }}>
                                                <option value="ê³µì§€ì‚¬í•­">ê³µì§€ì‚¬í•­</option>
                                                <option value="ì¸ë ¥êµ¬ì¸">ì¸ë ¥êµ¬ì¸</option>
                                            <option value="í”„ë¡œê·¸ë¨ í›„ê¸°">í”„ë¡œê·¸ë¨ í›„ê¸°</option>
                                            <option value="ê±´ì˜ì‚¬í•­">ê±´ì˜ì‚¬í•­</option>
                                                <option value="ì¤‘ê³ ê±°ë˜">ì¤‘ê³ ê±°ë˜</option>
                                        </select>
                                                    </div>
                                                    <div>
                                            <label className="block text-sm font-bold text-gray-700 mb-2">ì‘ì„±ì</label>
                                            <input type="text" className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none" value={formData.author} onChange={(e) => setFormData({...formData, author: e.target.value})} />
                                                    </div>
                                                    </div>
                                                    <div>
                                        <label className="block text-sm font-bold text-gray-700 mb-2">ì œëª© *</label>
                                        <input type="text" className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none" value={formData.title} onChange={(e) => setFormData({...formData, title: e.target.value})} />
                                                    </div>
                                                    <div>
                                        <label className="block text-sm font-bold text-gray-700 mb-2">ë‚´ìš© *</label>
                                        <textarea className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none h-48 resize-none" value={formData.content} onChange={(e) => setFormData({...formData, content: e.target.value})} />
                                                    </div>
                                    <div className="grid grid-cols-2 gap-4">
                                                    <div>
                                            <label className="flex items-center gap-2">
                                                <input type="checkbox" checked={formData.isSecret || false} onChange={(e) => setFormData({...formData, isSecret: e.target.checked})} />
                                                <span className="text-sm font-bold text-gray-700">ë¹„ë°€ê¸€</span>
                                                        </label>
                                                    </div>
                                    {formData.isSecret && (
                                                    <div>
                                                <label className="block text-sm font-bold text-gray-700 mb-2">ë¹„ë°€ë²ˆí˜¸</label>
                                                <input type="text" className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none" value={formData.password} onChange={(e) => setFormData({...formData, password: e.target.value})} />
                                                    </div>
                                                )}
                                                    </div>

                                {/* ì¸ë ¥êµ¬ì¸ ì¶”ê°€ í•„ë“œ */}
                                {formData.category === 'ì¸ë ¥êµ¬ì¸' && (
                                    <>
                                                    <div>
                                            <label className="block text-sm font-bold text-gray-700 mb-2">ì—…ë¬´ ë‚´ìš© *</label>
                                            <textarea className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none h-32 resize-none" value={formData.jobDetails} onChange={(e) => setFormData({...formData, jobDetails: e.target.value})} placeholder="ì—…ë¬´ ë‚´ìš©ì„ ìƒì„¸íˆ ì…ë ¥í•´ì£¼ì„¸ìš”" />
                                                    </div>
                                        <div className="grid grid-cols-2 gap-4">
                                                    <div>
                                                <label className="block text-sm font-bold text-gray-700 mb-2">ëª¨ì§‘ ì¸ì› *</label>
                                                <input type="number" className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none" value={formData.recruitCount} onChange={(e) => setFormData({...formData, recruitCount: e.target.value})} placeholder="ëª…" min="1" />
                                                    </div>
                                                    <div>
                                                <label className="block text-sm font-bold text-gray-700 mb-2">ë§ˆê°ì¼ *</label>
                                                <input type="date" className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none" value={formData.deadline} onChange={(e) => setFormData({...formData, deadline: e.target.value})} />
                                                    </div>
                                                    </div>
                                    <div>
                                            <label className="block text-sm font-bold text-gray-700 mb-2">ê·¼ë¬´ ì‹œê°„ *</label>
                                            <input type="text" className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none" value={formData.workHours} onChange={(e) => setFormData({...formData, workHours: e.target.value})} placeholder="ì˜ˆ: 09:00 ~ 18:00" />
                                    </div>
                                            <div>
                                            <label className="block text-sm font-bold text-gray-700 mb-2">ê¸‰ì—¬/ì²˜ìš° *</label>
                                            <input type="text" className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none" value={formData.salary} onChange={(e) => setFormData({...formData, salary: e.target.value})} placeholder="ì˜ˆ: ì›” 250ë§Œì›, ì£¼ 5ì¼" />
                                            </div>
                                            <div>
                                            <label className="block text-sm font-bold text-gray-700 mb-2">ìš°ëŒ€ ì‚¬í•­</label>
                                            <textarea className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none h-24 resize-none" value={formData.preferred} onChange={(e) => setFormData({...formData, preferred: e.target.value})} placeholder="ìš°ëŒ€ ì‚¬í•­ì„ ì…ë ¥í•´ì£¼ì„¸ìš”" />
                                            </div>
                                        <div className="grid grid-cols-2 gap-4">
                                            <div>
                                                <label className="block text-sm font-bold text-gray-700 mb-2">ë§¤ì¥ ìœ„ì¹˜ *</label>
                                                <input type="text" className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none" value={formData.storeLocation} onChange={(e) => setFormData({...formData, storeLocation: e.target.value})} placeholder="ë§¤ì¥ ì£¼ì†Œ" />
                                            </div>
                                            <div>
                                                <label className="block text-sm font-bold text-gray-700 mb-2">ì „í™”ë²ˆí˜¸ *</label>
                                                <input type="text" className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none" value={formData.storePhone} onChange={(e) => setFormData({...formData, storePhone: e.target.value})} placeholder="010-1234-5678" />
                                            </div>
                                            </div>
                                            <div>
                                            <label className="block text-sm font-bold text-gray-700 mb-2">ë§¤ì¥ ì‚¬ì§„ (ìµœëŒ€ 3ì¥)</label>
                                            <div className="flex gap-4 flex-wrap">
                                                {formData.storeImages && formData.storeImages.map((img, idx) => (
                                                    <div key={idx} className="relative">
                                                        <img src={img} alt={`ë§¤ì¥ ì‚¬ì§„ ${idx + 1}`} className="w-32 h-32 object-cover rounded-xl border-2 border-gray-200" />
                                                        <button type="button" onClick={() => setFormData({...formData, storeImages: formData.storeImages.filter((_, i) => i !== idx)})} className="absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center text-xs hover:bg-red-600">Ã—</button>
                                            </div>
                                                ))}
                                                {(!formData.storeImages || formData.storeImages.length < 3) && (
                                                    <label className="w-32 h-32 border-2 border-dashed border-gray-300 rounded-xl flex items-center justify-center cursor-pointer hover:border-brand transition-colors">
                                                        {uploadingImages ? (
                                                            <div className="text-center">
                                                                <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-brand mx-auto mb-2"></div>
                                                                <span className="text-xs text-gray-500">ì—…ë¡œë“œ ì¤‘...</span>
                                                </div>
                                                        ) : (
                                                            <div className="text-center">
                                                                <Icons.Plus size={24} className="text-gray-400 mx-auto mb-1" />
                                                                <span className="text-xs text-gray-500">ì‚¬ì§„ ì¶”ê°€</span>
                                            </div>
                                                        )}
                                                        <input type="file" accept="image/*" className="hidden" onChange={async (e) => {
                                                            const files = Array.from(e.target.files);
                                                            if (files.length === 0) return;
                                                            setUploadingImages(true);
                                                            try {
                                                                const uploadedUrls = await Promise.all(files.map(file => uploadImageToImgBB(file)));
                                                                setFormData({...formData, storeImages: [...(formData.storeImages || []), ...uploadedUrls].slice(0, 3)});
                                                            } catch (error) {
                                                                alert('ì´ë¯¸ì§€ ì—…ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                                                            } finally {
                                                                setUploadingImages(false);
                                                                e.target.value = '';
                                                            }
                                                        }} />
                                                    </label>
                                                )}
                                            </div>
                                            </div>
                                        </>
                                    )}

                                {/* ì¤‘ê³ ê±°ë˜ ì¶”ê°€ í•„ë“œ */}
                                    {formData.category === 'ì¤‘ê³ ê±°ë˜' && (
                                        <>
                                        <div className="grid grid-cols-2 gap-4">
                                            <div>
                                                <label className="block text-sm font-bold text-gray-700 mb-2">ì œí’ˆëª… *</label>
                                                <input type="text" className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none" value={formData.itemName} onChange={(e) => setFormData({...formData, itemName: e.target.value})} placeholder="ì œí’ˆëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”" />
                                            </div>
                                            <div>
                                                <label className="block text-sm font-bold text-gray-700 mb-2">ì¹´í…Œê³ ë¦¬ *</label>
                                                <select className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none" value={formData.itemCategory} onChange={(e) => setFormData({...formData, itemCategory: e.target.value})}>
                                                    <option value="">ì¹´í…Œê³ ë¦¬ ì„ íƒ</option>
                                                    <option value="ê°€ì „ì œí’ˆ">ê°€ì „ì œí’ˆ</option>
                                                    <option value="ê°€êµ¬">ê°€êµ¬</option>
                                                    <option value="ì˜ë¥˜">ì˜ë¥˜</option>
                                                    <option value="ì „ìê¸°ê¸°">ì „ìê¸°ê¸°</option>
                                                    <option value="ê¸°íƒ€">ê¸°íƒ€</option>
                                                </select>
                                            </div>
                                            </div>
                                        <div className="grid grid-cols-2 gap-4">
                                            <div>
                                                <label className="block text-sm font-bold text-gray-700 mb-2">ê°€ê²© *</label>
                                                <input type="number" className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none" value={formData.price} onChange={(e) => setFormData({...formData, price: e.target.value})} placeholder="ì›" min="0" />
                                            </div>
                                            <div>
                                                <label className="block text-sm font-bold text-gray-700 mb-2">ìƒíƒœ *</label>
                                                <select className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none" value={formData.itemCondition} onChange={(e) => setFormData({...formData, itemCondition: e.target.value})}>
                                                    <option value="">ìƒíƒœ ì„ íƒ</option>
                                                    <option value="Sê¸‰">Sê¸‰</option>
                                                    <option value="Aê¸‰">Aê¸‰</option>
                                                    <option value="Bê¸‰">Bê¸‰</option>
                                                    <option value="Cê¸‰">Cê¸‰</option>
                                                </select>
                                                </div>
                                            </div>
                                        <div className="grid grid-cols-2 gap-4">
                                            <div>
                                                <label className="block text-sm font-bold text-gray-700 mb-2">ê±°ë˜ ë°©ì‹ *</label>
                                                <select className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none" value={formData.tradeMethod} onChange={(e) => setFormData({...formData, tradeMethod: e.target.value})}>
                                                    <option value="">ê±°ë˜ ë°©ì‹ ì„ íƒ</option>
                                                    <option value="ì§ê±°ë˜">ì§ê±°ë˜</option>
                                                    <option value="íƒë°°">íƒë°°</option>
                                                    <option value="ì§ê±°ë˜/íƒë°°">ì§ê±°ë˜/íƒë°°</option>
                                                </select>
                                            </div>
                                            <div>
                                                <label className="block text-sm font-bold text-gray-700 mb-2">ê±°ë˜ ì§€ì—­ *</label>
                                                <input type="text" className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none" value={formData.tradeLocation} onChange={(e) => setFormData({...formData, tradeLocation: e.target.value})} placeholder="ê±°ë˜ ì§€ì—­ì„ ì…ë ¥í•´ì£¼ì„¸ìš”" />
                                                    </div>
                                                </div>
                                        <div>
                                            <label className="block text-sm font-bold text-gray-700 mb-2">ì œí’ˆ ì‚¬ì§„ (ìµœëŒ€ 3ì¥)</label>
                                            <div className="flex gap-4 flex-wrap">
                                                {formData.itemImages && formData.itemImages.map((img, idx) => (
                                                            <div key={idx} className="relative">
                                                        <img src={img} alt={`ì œí’ˆ ì‚¬ì§„ ${idx + 1}`} className="w-32 h-32 object-cover rounded-xl border-2 border-gray-200" />
                                                        <button type="button" onClick={() => setFormData({...formData, itemImages: formData.itemImages.filter((_, i) => i !== idx)})} className="absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center text-xs hover:bg-red-600">Ã—</button>
                                                            </div>
                                                        ))}
                                                {(!formData.itemImages || formData.itemImages.length < 3) && (
                                                    <label className="w-32 h-32 border-2 border-dashed border-gray-300 rounded-xl flex items-center justify-center cursor-pointer hover:border-brand transition-colors">
                                                        {uploadingImages ? (
                                                            <div className="text-center">
                                                                <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-brand mx-auto mb-2"></div>
                                                                <span className="text-xs text-gray-500">ì—…ë¡œë“œ ì¤‘...</span>
                                                    </div>
                                                        ) : (
                                                            <div className="text-center">
                                                                <Icons.Plus size={24} className="text-gray-400 mx-auto mb-1" />
                                                                <span className="text-xs text-gray-500">ì‚¬ì§„ ì¶”ê°€</span>
                                            </div>
                                                        )}
                                                        <input type="file" accept="image/*" className="hidden" onChange={async (e) => {
                                                            const files = Array.from(e.target.files);
                                                            if (files.length === 0) return;
                                                            setUploadingImages(true);
                                                            try {
                                                                const uploadedUrls = await Promise.all(files.map(file => uploadImageToImgBB(file)));
                                                                setFormData({...formData, itemImages: [...(formData.itemImages || []), ...uploadedUrls].slice(0, 3)});
                                                            } catch (error) {
                                                                alert('ì´ë¯¸ì§€ ì—…ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                                                            } finally {
                                                                setUploadingImages(false);
                                                                e.target.value = '';
                                                            }
                                                        }} />
                                                    </label>
                                                )}
                                            </div>
                                    </div>
                                    <div>
                                            <label className="block text-sm font-bold text-gray-700 mb-2">ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸ * (ì‹ ë¢°ë„ í™•ì¸ìš©)</label>
                                            <input type="text" className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none" value={formData.businessNumber} onChange={(e) => setFormData({...formData, businessNumber: e.target.value})} placeholder="ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”" />
                                    </div>
                                        </>
                                    )}

                                {/* í”„ë¡œê·¸ë¨ í›„ê¸° ì¶”ê°€ í•„ë“œ */}
                                    {formData.category === 'í”„ë¡œê·¸ë¨ í›„ê¸°' && (
                                        <>
                                            <div>
                                            <label className="block text-sm font-bold text-gray-700 mb-2">ë³„ì  *</label>
                                                <div className="flex gap-2">
                                                    {[1, 2, 3, 4, 5].map(star => (
                                                    <button
                                                        key={star}
                                                        type="button"
                                                        onClick={() => setFormData({...formData, rating: star})}
                                                        className="focus:outline-none"
                                                    >
                                                        <svg className={`w-8 h-8 transition-colors ${formData.rating >= star ? 'text-yellow-400' : 'text-gray-300'}`} fill={formData.rating >= star ? 'currentColor' : 'none'} stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z" />
                                                        </svg>
                                                        </button>
                                                    ))}
                                                </div>
                                            {formData.rating > 0 && (
                                                <p className="text-xs text-gray-500 mt-1">{formData.rating}ì  ì„ íƒë¨</p>
                                            )}
                                            </div>
                                            <div>
                                            <label className="block text-sm font-bold text-gray-700 mb-2">í›„ê¸° ì‚¬ì§„ (ìµœëŒ€ 3ì¥)</label>
                                            <div className="flex gap-4 flex-wrap">
                                                {formData.reviewImages && formData.reviewImages.map((img, idx) => (
                                                    <div key={idx} className="relative">
                                                        <img src={img} alt={`í›„ê¸° ì‚¬ì§„ ${idx + 1}`} className="w-32 h-32 object-cover rounded-xl border-2 border-gray-200" />
                                                        <button type="button" onClick={() => setFormData({...formData, reviewImages: formData.reviewImages.filter((_, i) => i !== idx)})} className="absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center text-xs hover:bg-red-600">Ã—</button>
                                                    </div>
                                                ))}
                                                {(!formData.reviewImages || formData.reviewImages.length < 3) && (
                                                    <label className="w-32 h-32 border-2 border-dashed border-gray-300 rounded-xl flex items-center justify-center cursor-pointer hover:border-brand transition-colors">
                                                        {uploadingImages ? (
                                                            <div className="text-center">
                                                                <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-brand mx-auto mb-2"></div>
                                                                <span className="text-xs text-gray-500">ì—…ë¡œë“œ ì¤‘...</span>
                                                            </div>
                                                                ) : (
                                                            <div className="text-center">
                                                                <Icons.Plus size={24} className="text-gray-400 mx-auto mb-1" />
                                                                <span className="text-xs text-gray-500">ì‚¬ì§„ ì¶”ê°€</span>
                                                            </div>
                                                        )}
                                                        <input type="file" accept="image/*" className="hidden" onChange={async (e) => {
                                                            const files = Array.from(e.target.files);
                                                            if (files.length === 0) return;
                                                            setUploadingImages(true);
                                                            try {
                                                                const uploadedUrls = await Promise.all(files.map(file => uploadImageToImgBB(file)));
                                                                setFormData({...formData, reviewImages: [...(formData.reviewImages || []), ...uploadedUrls].slice(0, 3)});
                                                            } catch (error) {
                                                                alert('ì´ë¯¸ì§€ ì—…ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                                                            } finally {
                                                                setUploadingImages(false);
                                                                                        e.target.value = '';
                                                                                    }
                                                        }} />
                                                                        </label>
                                                )}
                                                            </div>
                                            </div>
                                        </>
                                    )}
                                    </div>
                                
                                <div className="flex gap-4 mt-8">
                                    <button onClick={handleCloseModal} className="flex-1 py-4 bg-gray-100 text-gray-700 font-bold rounded-xl hover:bg-gray-200 transition-colors">
                                        ì·¨ì†Œ
                                    </button>
                                    <button onClick={handleSubmit} className="flex-1 py-4 bg-brand text-white font-bold rounded-xl hover:bg-blue-700 transition-colors">
                                        {editingItem ? 'ìˆ˜ì •' : 'ì¶”ê°€'}
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}
                            </div>
            );
        };

        // ==========================================
        // MasterTab í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ë“¤
        // ==========================================
        const MasterTabHeader = ({ masterSubTab, setMasterSubTab }) => {
            return (
                <div className="mb-6">
                    <h2 className="text-2xl font-bold text-dark mb-4">admin</h2>
                    <div className="flex gap-2 border-b border-gray-200">
                        <button
                            onClick={() => setMasterSubTab('logs')}
                            className={`px-4 py-2 font-bold text-sm transition-colors border-b-2 ${
                                masterSubTab === 'logs' ? 'border-brand text-brand' : 'border-transparent text-gray-400 hover:text-gray-600'
                            }`}
                        >
                            í™œë™ ê¸°ë¡
                                </button>
                                <button
                            onClick={() => setMasterSubTab('content')}
                            className={`px-4 py-2 font-bold text-sm transition-colors border-b-2 ${
                                masterSubTab === 'content' ? 'border-brand text-brand' : 'border-transparent text-gray-400 hover:text-gray-600'
                            }`}
                        >
                            í˜ì´ì§€ ê´€ë¦¬
                                </button>
                                <button
                            onClick={() => setMasterSubTab('csv')}
                            className={`px-4 py-2 font-bold text-sm transition-colors border-b-2 ${
                                masterSubTab === 'csv' ? 'border-brand text-brand' : 'border-transparent text-gray-400 hover:text-gray-600'
                            }`}
                        >
                            CSV ê´€ë¦¬
                                </button>
                                <button
                            onClick={() => setMasterSubTab('reset')}
                            className={`px-4 py-2 font-bold text-sm transition-colors border-b-2 ${
                                masterSubTab === 'reset' ? 'border-red-500 text-red-500' : 'border-transparent text-gray-400 hover:text-gray-600'
                            }`}
                        >
                            ë°ì´í„° ì´ˆê¸°í™”
                                </button>
                            </div>
                        </div>
            );
        };

        const LogsView = ({ logs }) => {
            return (
                <div className="bg-gray-50 rounded-2xl p-6">
                    <h3 className="font-bold text-dark mb-4 flex items-center gap-2">
                        <Icons.List className="text-brand" />
                        ê´€ë¦¬ì í™œë™ ê¸°ë¡
                        <span className="text-xs bg-red-100 text-red-600 px-2 py-1 rounded font-bold">Master Only</span>
                    </h3>
                    <div className="overflow-x-auto">
                        <table className="w-full text-left">
                            <thead className="bg-gray-100 text-xs text-gray-500">
                                <tr>
                                    <th className="p-4">ì¼ì‹œ</th>
                                    <th className="p-4">ê´€ë¦¬ì</th>
                                    <th className="p-4">ì‘ì—…</th>
                                    <th className="p-4">ëŒ€ìƒ</th>
                                    <th className="p-4">ìƒì„¸ ë‚´ìš©</th>
                                </tr>
                            </thead>
                            <tbody>
                                {logs.length > 0 ? (
                                    logs.slice().reverse().map((log, idx) => (
                                        <tr key={idx} className="border-b border-gray-50 hover:bg-gray-50">
                                            <td className="p-4 text-xs text-gray-500">{log.timestamp}</td>
                                            <td className="p-4">
                                                <span className="text-xs font-bold text-brand bg-brand/10 px-2 py-1 rounded">
                                                    {log.adminName || 'ì‹œìŠ¤í…œ'}
                                            </span>
                                            </td>
                                            <td className="p-4">
                                                <span className={`text-xs px-2 py-1 rounded font-bold ${
                                                    log.action === 'CREATE' ? 'bg-green-100 text-green-700' :
                                                    log.action === 'UPDATE' ? 'bg-blue-100 text-blue-700' :
                                                    'bg-red-100 text-red-700'
                                                }`}>
                                                    {log.action}
                                                    </span>
                                            </td>
                                            <td className="p-4 text-sm font-bold text-gray-700">{log.targetType}</td>
                                            <td className="p-4 text-sm text-gray-600">{log.details}</td>
                                        </tr>
                                    ))
                                ) : (
                                    <tr>
                                        <td colSpan="5" className="p-10 text-center text-gray-400">ê¸°ë¡ëœ í™œë™ì´ ì—†ìŠµë‹ˆë‹¤.</td>
                                    </tr>
                                )}
                            </tbody>
                        </table>
                                    </div>
                </div>
            );
        };

        const ContentView = ({ content, setContent, menuEnabled, setMenuEnabled, menuNames, setMenuNames, addLog, currentUser }) => {
            const handleSave = () => {
                saveDataToStorage(STORAGE_KEY_CONTENT, content);
                saveDataToStorage(STORAGE_KEY_MENU_ENABLED, menuEnabled);
                saveDataToStorage(STORAGE_KEY_MENU_NAMES, menuNames);
                addLog('UPDATE', 'í˜ì´ì§€ ì„¤ì •', `${currentUser?.name || 'ê´€ë¦¬ì'}ë‹˜ì´ í˜ì´ì§€ ì„¤ì •ì„ ë³€ê²½í–ˆìŠµë‹ˆë‹¤.`, currentUser?.name);
                alert('í˜ì´ì§€ ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
            };

            const handleReset = () => {
                if (!confirm('ëª¨ë“  í˜ì´ì§€ ì„¤ì •ì„ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.')) {
                    return;
                }
                const defaultMenuEnabled = {
                    'í™ˆ': true,
                    'ì†Œê°œ': true,
                    'í”„ë¡œê·¸ë¨': true,
                    'ë¶€ì²­ì‚¬ íšŒì›': true,
                    'ì»¤ë®¤ë‹ˆí‹°': true,
                    'ì…ì°°ê³µê³ ': true,
                    'í›„ì›': true
                };
                const defaultMenuNames = {
                    'í™ˆ': 'í™ˆ',
                    'ì†Œê°œ': 'ì†Œê°œ',
                    'í”„ë¡œê·¸ë¨': 'í”„ë¡œê·¸ë¨',
                    'ë¶€ì²­ì‚¬ íšŒì›': 'ë¶€ì²­ì‚¬ íšŒì›',
                    'ì»¤ë®¤ë‹ˆí‹°': 'ì»¤ë®¤ë‹ˆí‹°',
                    'ì…ì°°ê³µê³ ': 'ì…ì°°ê³µê³ ',
                    'í›„ì›': 'í›„ì›'
                };
                setContent(defaultContent);
                setMenuEnabled(defaultMenuEnabled);
                setMenuNames(defaultMenuNames);
                saveDataToStorage(STORAGE_KEY_CONTENT, defaultContent);
                saveDataToStorage(STORAGE_KEY_MENU_ENABLED, defaultMenuEnabled);
                saveDataToStorage(STORAGE_KEY_MENU_NAMES, defaultMenuNames);
                addLog('RESET', 'í˜ì´ì§€ ì„¤ì •', `${currentUser?.name || 'ê´€ë¦¬ì'}ë‹˜ì´ í˜ì´ì§€ ì„¤ì •ì„ ì´ˆê¸°í™”í–ˆìŠµë‹ˆë‹¤.`, currentUser?.name);
                alert('í˜ì´ì§€ ì„¤ì •ì´ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.');
            };

            return (
                <div className="bg-gray-50 rounded-2xl p-6">
                    <h3 className="font-bold text-dark mb-4">í˜ì´ì§€ ê´€ë¦¬</h3>
                    <div className="space-y-6">
                        <div>
                            <label className="block text-sm font-bold text-gray-700 mb-2">íˆì–´ë¡œ íƒ€ì´í‹€</label>
                            <textarea 
                                className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none h-24 resize-none"
                                value={content.hero_title || ''}
                                onChange={(e) => setContent({...content, hero_title: e.target.value})}
                                />
                            </div>
                        <div>
                            <label className="block text-sm font-bold text-gray-700 mb-2">íˆì–´ë¡œ ì„¤ëª…</label>
                            <textarea 
                                className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none h-24 resize-none"
                                value={content.hero_desc || ''}
                                onChange={(e) => setContent({...content, hero_desc: e.target.value})}
                            />
                            </div>

                        {/* ì†Œê°œ í˜ì´ì§€ í•„ë“œ */}
                        <div className="pt-4 border-t border-gray-200">
                            <h4 className="font-bold text-dark mb-4">ì†Œê°œ í˜ì´ì§€</h4>
                            <div className="space-y-4">
                                <div>
                                    <label className="block text-sm font-bold text-gray-700 mb-2">ì†Œê°œ í˜ì´ì§€ íˆì–´ë¡œ íƒ€ì´í‹€</label>
                                    <input type="text" className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none" value={content.about_hero_title || ''} onChange={(e) => setContent({...content, about_hero_title: e.target.value})} />
                                    </div>
                                <div>
                                    <label className="block text-sm font-bold text-gray-700 mb-2">ì†Œê°œ í˜ì´ì§€ íˆì–´ë¡œ ì„¤ëª…</label>
                                    <textarea className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none h-24 resize-none" value={content.about_hero_desc || ''} onChange={(e) => setContent({...content, about_hero_desc: e.target.value})} />
                                </div>
                                <div>
                                    <label className="block text-sm font-bold text-gray-700 mb-2">ë¯¸ì…˜ íƒ€ì´í‹€</label>
                                    <input type="text" className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none" value={content.about_mission_title || ''} onChange={(e) => setContent({...content, about_mission_title: e.target.value})} />
                                            </div>
                                <div>
                                    <label className="block text-sm font-bold text-gray-700 mb-2">ë¯¸ì…˜ ì„¤ëª… 1</label>
                                    <textarea className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none h-20 resize-none" value={content.about_mission_desc_1 || ''} onChange={(e) => setContent({...content, about_mission_desc_1: e.target.value})} />
                                    </div>
                                <div>
                                    <label className="block text-sm font-bold text-gray-700 mb-2">ë¯¸ì…˜ ì„¤ëª… 2</label>
                                    <textarea className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none h-20 resize-none" value={content.about_mission_desc_2 || ''} onChange={(e) => setContent({...content, about_mission_desc_2: e.target.value})} />
                                </div>
                                <div>
                                    <label className="block text-sm font-bold text-gray-700 mb-2">ë¯¸ì…˜ ì„¤ëª… 3</label>
                                    <textarea className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none h-20 resize-none" value={content.about_mission_desc_3 || ''} onChange={(e) => setContent({...content, about_mission_desc_3: e.target.value})} />
                            </div>
                                <div>
                                    <label className="block text-sm font-bold text-gray-700 mb-2">í•„ìš”í•œ ì´ìœ  íƒ€ì´í‹€</label>
                                    <input type="text" className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none" value={content.about_why_title || ''} onChange={(e) => setContent({...content, about_why_title: e.target.value})} />
                            </div>
                                <div>
                                    <label className="block text-sm font-bold text-gray-700 mb-2">í•„ìš”í•œ ì´ìœ  ë¶€ì œëª©</label>
                                    <input type="text" className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none" value={content.about_why_subtitle || ''} onChange={(e) => setContent({...content, about_why_subtitle: e.target.value})} />
                            </div>
                                <div className="grid grid-cols-2 gap-4">
                                    <div>
                                        <label className="block text-sm font-bold text-gray-700 mb-2">ì´ìœ  1 íƒ€ì´í‹€</label>
                                        <input type="text" className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none" value={content.about_why_1_title || ''} onChange={(e) => setContent({...content, about_why_1_title: e.target.value})} />
                                        </div>
                                    <div>
                                        <label className="block text-sm font-bold text-gray-700 mb-2">ì´ìœ  1 ì„¤ëª…</label>
                                        <textarea className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none h-20 resize-none" value={content.about_why_1_desc || ''} onChange={(e) => setContent({...content, about_why_1_desc: e.target.value})} />
                                    </div>
                            </div>
                                <div className="grid grid-cols-2 gap-4">
                                    <div>
                                        <label className="block text-sm font-bold text-gray-700 mb-2">ì´ìœ  2 íƒ€ì´í‹€</label>
                                        <input type="text" className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none" value={content.about_why_2_title || ''} onChange={(e) => setContent({...content, about_why_2_title: e.target.value})} />
                            </div>
                                    <div>
                                        <label className="block text-sm font-bold text-gray-700 mb-2">ì´ìœ  2 ì„¤ëª…</label>
                                        <textarea className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none h-20 resize-none" value={content.about_why_2_desc || ''} onChange={(e) => setContent({...content, about_why_2_desc: e.target.value})} />
                                                    </div>
                                                </div>
                                <div className="grid grid-cols-2 gap-4">
                                    <div>
                                        <label className="block text-sm font-bold text-gray-700 mb-2">ì´ìœ  3 íƒ€ì´í‹€</label>
                                        <input type="text" className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none" value={content.about_why_3_title || ''} onChange={(e) => setContent({...content, about_why_3_title: e.target.value})} />
                                        </div>
                                    <div>
                                        <label className="block text-sm font-bold text-gray-700 mb-2">ì´ìœ  3 ì„¤ëª…</label>
                                        <textarea className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none h-20 resize-none" value={content.about_why_3_desc || ''} onChange={(e) => setContent({...content, about_why_3_desc: e.target.value})} />
                                </div>
                            </div>
                                <div className="grid grid-cols-2 gap-4">
                                    <div>
                                        <label className="block text-sm font-bold text-gray-700 mb-2">ì´ìœ  4 íƒ€ì´í‹€</label>
                                        <input type="text" className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none" value={content.about_why_4_title || ''} onChange={(e) => setContent({...content, about_why_4_title: e.target.value})} />
                                            </div>
                                    <div>
                                        <label className="block text-sm font-bold text-gray-700 mb-2">ì´ìœ  4 ì„¤ëª…</label>
                                        <textarea className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none h-20 resize-none" value={content.about_why_4_desc || ''} onChange={(e) => setContent({...content, about_why_4_desc: e.target.value})} />
                                    </div>
                            </div>
                                <div>
                                    <label className="block text-sm font-bold text-gray-700 mb-2">ì—°ë½ì²˜ ì „í™”ë²ˆí˜¸</label>
                                    <input type="text" className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none" value={content.about_contact_phone || ''} onChange={(e) => setContent({...content, about_contact_phone: e.target.value})} />
                            </div>
                                <div>
                                    <label className="block text-sm font-bold text-gray-700 mb-2">ì—°ë½ì²˜ ì´ë©”ì¼</label>
                                    <input type="email" className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none" value={content.about_contact_email || ''} onChange={(e) => setContent({...content, about_contact_email: e.target.value})} />
                                </div>
                            </div>
                                    </div>
                        
                        <div className="pt-4 border-t border-gray-200">
                            <h4 className="font-bold text-dark mb-4">ë©”ë‰´ í™œì„±í™”</h4>
                            <div className="space-y-3">
                                {['í™ˆ', 'ì†Œê°œ', 'í”„ë¡œê·¸ë¨', 'ë¶€ì²­ì‚¬ íšŒì›', 'ì»¤ë®¤ë‹ˆí‹°', 'ì…ì°°ê³µê³ ', 'í›„ì›'].map(menu => (
                                    <div key={menu} className="flex items-center justify-between p-3 bg-white rounded-lg">
                                        <span className="font-bold text-gray-700">{menu}</span>
                                        <label className="flex items-center gap-2">
                                            <input 
                                                type="checkbox" 
                                                checked={menuEnabled[menu] !== undefined ? menuEnabled[menu] : true}
                                                onChange={(e) => setMenuEnabled({...menuEnabled, [menu]: e.target.checked})}
                                            />
                                            <span className="text-sm text-gray-600">í™œì„±í™”</span>
                                        </label>
                                </div>
                                    ))}
                            </div>
                    </div>
                        
                        <div className="pt-4 border-t border-gray-200">
                            <h4 className="font-bold text-dark mb-4">ë©”ë‰´ ì´ë¦„ ë³€ê²½</h4>
                            <div className="space-y-3">
                                {['í™ˆ', 'ì†Œê°œ', 'í”„ë¡œê·¸ë¨', 'ë¶€ì²­ì‚¬ íšŒì›', 'ì»¤ë®¤ë‹ˆí‹°', 'ì…ì°°ê³µê³ ', 'í›„ì›'].map(menu => (
                                    <div key={menu} className="flex items-center gap-3">
                                        <span className="w-32 text-sm font-bold text-gray-700">{menu}:</span>
                                        <input 
                                            type="text"
                                            className="flex-1 p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none"
                                            value={menuNames[menu] || menu}
                                            onChange={(e) => setMenuNames({...menuNames, [menu]: e.target.value})}
                                            placeholder={menu}
                                        />
                </div>
                                ))}
                            </div>
                        </div>

                        <div className="flex gap-4">
                                    <button
                                onClick={handleReset}
                                className="flex-1 py-4 bg-red-500 text-white font-bold rounded-xl hover:bg-red-600 transition-colors"
                            >
                                ì´ˆê¸°í™”
                                    </button>
                                    <button
                                onClick={handleSave}
                                className="flex-1 py-4 bg-brand text-white font-bold rounded-xl hover:bg-blue-700 transition-colors"
                            >
                                ì €ì¥
                                    </button>
                                </div>
                            </div>
                                </div>
            );
        };

        const ResetView = ({ onDataReset, onMigrate }) => {
            return (
                <div className="space-y-6">
                    {/* ë§ˆì´ê·¸ë ˆì´ì…˜ ì„¹ì…˜ */}
                    <div className="bg-blue-50 rounded-2xl p-6 border-2 border-blue-200">
                        <div className="flex items-center gap-3 mb-4">
                            <Icons.Download className="text-blue-500" size={24} />
                            <h3 className="font-bold text-blue-700 text-xl">Firestore ë§ˆì´ê·¸ë ˆì´ì…˜</h3>
                        </div>
                        <div className="bg-white rounded-xl p-6 space-y-4 mb-6">
                            <p className="text-sm text-gray-600">
                                localStorageì— ì €ì¥ëœ ê¸°ì¡´ ë°ì´í„°ë¥¼ Firebase Firestoreë¡œ ì´ì „í•©ë‹ˆë‹¤.
                            </p>
                            <ul className="text-sm text-gray-600 space-y-1 list-disc list-inside">
                                <li>íšŒì› ë°ì´í„° â†’ Firestore users ì»¬ë ‰ì…˜</li>
                                <li>ì„¸ë¯¸ë‚˜ ë°ì´í„° â†’ Firestore seminars ì»¬ë ‰ì…˜</li>
                                <li>ê²Œì‹œê¸€ ë°ì´í„° â†’ Firestore posts ì»¬ë ‰ì…˜</li>
                                <li>ì¤‘ë³µ ë°ì´í„°ëŠ” ìë™ìœ¼ë¡œ ê±´ë„ˆëœë‹ˆë‹¤</li>
                            </ul>
                        </div>
                        <button
                            onClick={onMigrate}
                            className="w-full py-4 bg-blue-600 text-white font-bold rounded-xl hover:bg-blue-700 transition-colors shadow-lg"
                        >
                            localStorage â†’ Firestore ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰
                        </button>
                    </div>
                    
                    {/* ë°ì´í„° ì´ˆê¸°í™” ì„¹ì…˜ */}
                    <div className="bg-red-50 rounded-2xl p-6 border-2 border-red-200">
                        <div className="flex items-center gap-3 mb-4">
                            <Icons.Trash className="text-red-500" size={24} />
                            <h3 className="font-bold text-red-700 text-xl">ë°ì´í„° ì´ˆê¸°í™”</h3>
                        </div>
                    <div className="bg-white rounded-xl p-6 space-y-4 mb-6">
                        <div className="flex items-start gap-3">
                            <div className="w-6 h-6 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5">
                                <span className="text-red-600 font-bold text-sm">!</span>
                            </div>
                            <div>
                                <p className="font-bold text-gray-800 mb-2">âš ï¸ ì£¼ì˜ì‚¬í•­</p>
                                <ul className="text-sm text-gray-600 space-y-1 list-disc list-inside">
                                    <li>ëª¨ë“  íšŒì› ë°ì´í„°ê°€ ì‚­ì œë©ë‹ˆë‹¤ (í–‡ë°˜ ê³„ì • ì œì™¸)</li>
                                    <li>ëª¨ë“  í”„ë¡œê·¸ë¨ ë°ì´í„°ê°€ ì‚­ì œë©ë‹ˆë‹¤</li>
                                    <li>ëª¨ë“  ê²Œì‹œê¸€ ë°ì´í„°ê°€ ì‚­ì œë©ë‹ˆë‹¤</li>
                                    <li>ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤</li>
                                    <li>ì´ˆê¸°í™” í›„ í–‡ë°˜ ê³„ì •ë§Œ ë‚¨ìŠµë‹ˆë‹¤</li>
                                </ul>
                            </div>
                        </div>
                        <div className="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                            <p className="text-sm text-yellow-800">
                                <strong>í–‡ë°˜ ê³„ì • ì •ë³´:</strong><br/>
                                ì•„ì´ë””: í–‡ë°˜<br/>
                                ë¹„ë°€ë²ˆí˜¸: 0219<br/>
                                ì´ë©”ì¼: admin@busan-ycc.com
                            </p>
                        </div>
                    </div>
                        <button
                            onClick={onDataReset}
                            className="w-full py-4 bg-red-600 text-white font-bold rounded-xl hover:bg-red-700 transition-colors shadow-lg"
                        >
                            ëª¨ë“  ë°ì´í„° ì´ˆê¸°í™” (í–‡ë°˜ ê³„ì •ë§Œ ìœ ì§€)
                        </button>
                    </div>
                </div>
            );
        };
        
        const CsvView = ({ csvUrls, setCsvUrls, handleSaveCsvUrls }) => {
            return (
                <div className="bg-gray-50 rounded-2xl p-6">
                    <h3 className="font-bold text-dark mb-4">CSV ê´€ë¦¬</h3>
                    <div className="space-y-4">
                            <div>
                            <label className="block text-sm font-bold text-gray-700 mb-2">íšŒì› CSV URL</label>
                                    <input
                                type="text"
                                className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none"
                                value={csvUrls.members || ''}
                                onChange={(e) => setCsvUrls({...csvUrls, members: e.target.value})}
                                placeholder="https://docs.google.com/spreadsheets/..."
                            />
                                </div>
                                    <div>
                            <label className="block text-sm font-bold text-gray-700 mb-2">í”„ë¡œê·¸ë¨ CSV URL</label>
                                        <input
                                            type="text"
                                className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none"
                                value={csvUrls.seminars || ''}
                                onChange={(e) => setCsvUrls({...csvUrls, seminars: e.target.value})}
                                placeholder="https://docs.google.com/spreadsheets/..."
                                        />
                                    </div>
                        <div>
                            <label className="block text-sm font-bold text-gray-700 mb-2">ê²Œì‹œê¸€ CSV URL</label>
                                        <input
                                type="text"
                                className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none"
                                value={csvUrls.posts || ''}
                                onChange={(e) => setCsvUrls({...csvUrls, posts: e.target.value})}
                                placeholder="https://docs.google.com/spreadsheets/..."
                            />
                            </div>

                                <button
                            onClick={handleSaveCsvUrls}
                            className="w-full py-4 bg-brand text-white font-bold rounded-xl hover:bg-blue-700 transition-colors"
                        >
                            CSV URL ì €ì¥
                                </button>
                        
                        <div className="mt-8 pt-6 border-t border-gray-200">
                            <h4 className="font-bold text-dark mb-4">CSV í˜•ì‹ ê°€ì´ë“œ</h4>
                            <div className="bg-white rounded-xl p-4 space-y-4 text-sm">
                                <div>
                                    <p className="font-bold text-gray-700 mb-2">íšŒì› CSV ì»¬ëŸ¼:</p>
                                    <p className="text-gray-600">ì´ë¦„, ì—…ì¢…, ì§ì±…, íšŒì‚¬ëª…, ì´ë¯¸ì§€URL</p>
                            </div>
                                <div>
                                    <p className="font-bold text-gray-700 mb-2">í”„ë¡œê·¸ë¨ CSV ì»¬ëŸ¼:</p>
                                    <p className="text-gray-600">ì œëª©, ë‚ ì§œ(YYYY.MM.DD), ì¥ì†Œ, ì„¤ëª…, ì´ë¯¸ì§€URL, ìƒíƒœ, ì¹´í…Œê³ ë¦¬, í˜„ì¬ì¸ì›, ìµœëŒ€ì¸ì›</p>
                        </div>
                                <div>
                                    <p className="font-bold text-gray-700 mb-2">ê²Œì‹œê¸€ CSV ì»¬ëŸ¼:</p>
                                    <p className="text-gray-600">ì¹´í…Œê³ ë¦¬, ì œëª©, ì‘ì„±ì, ë‚ ì§œ(YYYY.MM.DD), ë‚´ìš©, ë¹„ë°€ê¸€ì—¬ë¶€(true/false), ë¹„ë°€ë²ˆí˜¸, ì¡°íšŒìˆ˜, ì¢‹ì•„ìš”ìˆ˜</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const MasterTab = ({ content, setContent, menuEnabled, setMenuEnabled, menuNames, setMenuNames, logs, addLog, currentUser, onDataReset, onMigrate }) => {
            const [masterSubTab, setMasterSubTab] = useState('logs');
            const [csvUrls, setCsvUrls] = useState(() => loadDataFromStorage(STORAGE_KEY_CSV_URLS, { members: '', seminars: '', posts: '' }));
            
            const handleSaveCsvUrls = () => {
                saveDataToStorage(STORAGE_KEY_CSV_URLS, csvUrls);
                addLog('UPDATE', 'CSV URL', `${currentUser?.name || 'ê´€ë¦¬ì'}ë‹˜ì´ CSV URLì„ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤.`, currentUser?.name);
                alert('CSV URLì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
            };

            // ì»¨í…ì¸  ë Œë”ë§ í•¨ìˆ˜
            const renderContent = () => {
                switch(masterSubTab) {
                    case 'logs':
                        return <LogsView logs={logs} />;
                    case 'content':
                        return (
                            <ContentView 
                                content={content}
                                setContent={setContent}
                                menuEnabled={menuEnabled}
                                setMenuEnabled={setMenuEnabled}
                                menuNames={menuNames}
                                setMenuNames={setMenuNames}
                                addLog={addLog}
                                currentUser={currentUser}
                            />
                        );
                    case 'csv':
                        return (
                            <CsvView 
                                csvUrls={csvUrls}
                                setCsvUrls={setCsvUrls}
                                handleSaveCsvUrls={handleSaveCsvUrls}
                            />
                        );
                    case 'reset':
                        return (
                            <ResetView onDataReset={onDataReset} onMigrate={onMigrate} />
                        );
                    default:
                        return null;
                }
            };

            return (
                                        <div>
                    <MasterTabHeader masterSubTab={masterSubTab} setMasterSubTab={setMasterSubTab} />
                    {renderContent()}
                </div>
            );
        };

        // ë¬¸ì˜í•˜ê¸° ê´€ë¦¬ íƒ­
        const InquiriesTab = ({ addLog, currentUser }) => {
            const [inquiries, setInquiries] = useState([]);
            const [selectedInquiry, setSelectedInquiry] = useState(null);
            const [replyText, setReplyText] = useState('');
            const [statusFilter, setStatusFilter] = useState('ì „ì²´');
            
            // ë¬¸ì˜í•˜ê¸° ë°ì´í„° ë¡œë“œ
            const loadInquiries = () => {
                try {
                    const stored = localStorage.getItem('busan_ycc_inquiries');
                    return stored ? JSON.parse(stored) : [];
                } catch (error) {
                    console.error('ë¬¸ì˜í•˜ê¸° ë°ì´í„° ë¡œë“œ ì˜¤ë¥˜:', error);
                    return [];
                }
            };
            
            useEffect(() => {
                setInquiries(loadInquiries());
                
                // ì£¼ê¸°ì ìœ¼ë¡œ ì—…ë°ì´íŠ¸ (2ì´ˆë§ˆë‹¤)
                const interval = setInterval(() => {
                    setInquiries(loadInquiries());
                }, 2000);
                
                return () => clearInterval(interval);
            }, []);
            
            const filteredInquiries = statusFilter === 'ì „ì²´' 
                ? inquiries 
                : inquiries.filter(i => i.status === statusFilter);
            
            const handleReply = (inquiry) => {
                if (!replyText.trim()) {
                    alert('ë‹µë³€ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    return;
                }
                
                const updatedInquiries = inquiries.map(i => 
                    i.id === inquiry.id 
                        ? { 
                            ...i, 
                            reply: replyText, 
                            status: 'answered',
                            repliedAt: new Date().toISOString()
                        }
                        : i
                );
                
                localStorage.setItem('busan_ycc_inquiries', JSON.stringify(updatedInquiries));
                setInquiries(updatedInquiries);
                setSelectedInquiry(null);
                setReplyText('');
                addLog('REPLY', 'ë¬¸ì˜í•˜ê¸°', `${currentUser?.name || 'ê´€ë¦¬ì'}ë‹˜ì´ ë¬¸ì˜í•˜ê¸°ì— ë‹µë³€í–ˆìŠµë‹ˆë‹¤.`, currentUser?.name, `ë¬¸ì˜: ${inquiry.title}`);
                alert('ë‹µë³€ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.');
            };
            
            const handleStatusChange = (inquiry, newStatus) => {
                const updatedInquiries = inquiries.map(i => 
                    i.id === inquiry.id ? { ...i, status: newStatus } : i
                );
                
                localStorage.setItem('busan_ycc_inquiries', JSON.stringify(updatedInquiries));
                setInquiries(updatedInquiries);
                addLog('UPDATE', 'ë¬¸ì˜í•˜ê¸°', `${currentUser?.name || 'ê´€ë¦¬ì'}ë‹˜ì´ ë¬¸ì˜í•˜ê¸° ìƒíƒœë¥¼ ë³€ê²½í–ˆìŠµë‹ˆë‹¤.`, currentUser?.name, `ë¬¸ì˜: ${inquiry.title}, ìƒíƒœ: ${newStatus}`);
            };
            
            const getStatusLabel = (status) => {
                switch(status) {
                    case 'pending': return 'ëŒ€ê¸°ì¤‘';
                    case 'answered': return 'ë‹µë³€ì™„ë£Œ';
                    case 'closed': return 'ì¢…ë£Œ';
                    default: return status;
                }
            };
            
            const getStatusColor = (status) => {
                switch(status) {
                    case 'pending': return 'bg-yellow-100 text-yellow-700';
                    case 'answered': return 'bg-green-100 text-green-700';
                    case 'closed': return 'bg-gray-100 text-gray-700';
                    default: return 'bg-gray-100 text-gray-700';
                }
            };
            
            return (
                <div>
                    <div className="flex items-center justify-between mb-6">
                        <h2 className="text-2xl font-bold text-dark">ë¬¸ì˜í•˜ê¸° ê´€ë¦¬</h2>
                        <div className="flex items-center gap-4">
                            <select 
                                value={statusFilter}
                                onChange={(e) => setStatusFilter(e.target.value)}
                                className="px-4 py-2 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none"
                            >
                                <option value="ì „ì²´">ì „ì²´</option>
                                <option value="pending">ëŒ€ê¸°ì¤‘</option>
                                <option value="answered">ë‹µë³€ì™„ë£Œ</option>
                                <option value="closed">ì¢…ë£Œ</option>
                            </select>
                        </div>
                    </div>
                    
                    <div className="bg-white rounded-2xl border border-gray-200 overflow-hidden">
                        {filteredInquiries.length === 0 ? (
                            <div className="p-10 text-center text-gray-400">ë¬¸ì˜í•˜ê¸°ê°€ ì—†ìŠµë‹ˆë‹¤.</div>
                        ) : (
                            <div className="space-y-4 p-4">
                                {filteredInquiries.map((inquiry) => (
                                    <div key={inquiry.id} className="border border-gray-200 rounded-xl p-6 hover:bg-gray-50 transition-colors">
                                        <div className="flex items-start justify-between mb-4">
                                            <div className="flex-1">
                                                <div className="flex items-center gap-3 mb-2">
                                                    <h3 className="text-lg font-bold text-dark">{inquiry.title}</h3>
                                                    <span className={`text-xs px-2 py-1 rounded font-bold ${getStatusColor(inquiry.status)}`}>
                                                        {getStatusLabel(inquiry.status)}
                                                    </span>
                                                </div>
                                                <div className="text-sm text-gray-600 space-y-1">
                                                    <div><span className="font-bold">ì‘ì„±ì:</span> {inquiry.name} ({inquiry.email})</div>
                                                    {inquiry.phone && <div><span className="font-bold">ì „í™”ë²ˆí˜¸:</span> {inquiry.phone}</div>}
                                                    <div><span className="font-bold">ì‘ì„±ì¼:</span> {new Date(inquiry.createdAt).toLocaleString('ko-KR')}</div>
                                                </div>
                                            </div>
                                            <div className="flex gap-2">
                                                <button 
                                                    onClick={() => setSelectedInquiry(selectedInquiry?.id === inquiry.id ? null : inquiry)}
                                                    className="px-4 py-2 bg-brand text-white rounded-lg font-bold hover:bg-blue-700"
                                                >
                                                    {selectedInquiry?.id === inquiry.id ? 'ë‹«ê¸°' : 'ë‹µë³€í•˜ê¸°'}
                                                </button>
                                                <select 
                                                    value={inquiry.status}
                                                    onChange={(e) => handleStatusChange(inquiry, e.target.value)}
                                                    className="px-3 py-2 border-2 border-gray-200 rounded-lg focus:border-brand focus:outline-none text-sm"
                                                >
                                                    <option value="pending">ëŒ€ê¸°ì¤‘</option>
                                                    <option value="answered">ë‹µë³€ì™„ë£Œ</option>
                                                    <option value="closed">ì¢…ë£Œ</option>
                                                </select>
                                            </div>
                                        </div>
                                        
                                        <div className="bg-gray-50 rounded-lg p-4 mb-4">
                                            <p className="text-gray-700 whitespace-pre-wrap">{inquiry.content}</p>
                                        </div>
                                        
                                        {inquiry.reply && (
                                            <div className="bg-blue-50 rounded-lg p-4 mb-4 border-l-4 border-brand">
                                                <div className="font-bold text-brand mb-2">ê´€ë¦¬ì ë‹µë³€</div>
                                                <p className="text-gray-700 whitespace-pre-wrap">{inquiry.reply}</p>
                                                {inquiry.repliedAt && (
                                                    <div className="text-xs text-gray-500 mt-2">
                                                        ë‹µë³€ì¼: {new Date(inquiry.repliedAt).toLocaleString('ko-KR')}
                                                    </div>
                                                )}
                                            </div>
                                        )}
                                        
                                        {selectedInquiry?.id === inquiry.id && !inquiry.reply && (
                                            <div className="border-t border-gray-200 pt-4 mt-4">
                                                <label className="block text-sm font-bold text-gray-700 mb-2">ë‹µë³€ ì‘ì„±</label>
                                                <textarea 
                                                    value={replyText}
                                                    onChange={(e) => setReplyText(e.target.value)}
                                                    placeholder="ë‹µë³€ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”"
                                                    className="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-brand focus:outline-none h-32 resize-none mb-3"
                                                />
                                                <button 
                                                    onClick={() => handleReply(inquiry)}
                                                    className="px-6 py-2 bg-brand text-white rounded-xl font-bold hover:bg-blue-700"
                                                >
                                                    ë‹µë³€ ë“±ë¡
                                                </button>
                                            </div>
                                        )}
                                    </div>
                                ))}
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        // ==========================================
        // App ì»´í¬ë„ŒíŠ¸
        // ==========================================
        const App = () => {
            return <AdminDashboard />;
        };

        // ë Œë”ë§
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>

# 🔍 나라장터 원본 API vs 현재 시스템 비교 보고서

**작성일**: 2026년 1월 29일  
**검색 조건**: 기관명="부산", 최근 30일

---

## 📊 비교 결과 요약

| 항목 | 현재 시스템 | 나라장터 원본 | 일치율 |
|------|-----------|-------------|--------|
| 결과 개수 | 10개 | 0개 | 0% |
| 공통 공고번호 | 0개 | - | - |

---

## 🔍 발견된 문제

### 문제 #1: 필터링 불일치

**현재 시스템이 반환하는 결과**:
1. `R25BK01229960` - 서울대학교 (부산 아님)
2. `R25BK01251047` - 한국농어촌공사 전남지역본부 (부산 아님)
3. `R25BK01251038` - 경기도 평택시 (부산 아님)
4. `R25BK01251048` - 전라남도 신안군 (부산 아님)
5. `R25BK01251026` - 전라남도 신안군 (부산 아님)

**나라장터 원본 API 결과**: 0개

**분석**:
- 나라장터 API는 "부산"이라는 정확한 기관명을 찾지 못함
- 현재 시스템은 "부산" 검색 시 부산과 무관한 결과도 반환
- 이는 필터링 로직 문제 또는 여러 API 병합 시 필터 미적용 가능성

---

## 💡 가능한 원인

### 1. 나라장터 API 필터링 특성
나라장터 API의 `insttNm` 파라미터는:
- **정확 일치**를 요구할 수 있음 (부분 일치 불가)
- "부산"이라는 단독 키워드로는 매칭되는 기관이 없을 수 있음
- 실제 기관명은 "부산광역시", "부산시", "부산대학교" 등일 수 있음

### 2. 현재 시스템 필터링 로직
- 여러 API 엔드포인트(물품, 용역, 공사)를 병합할 때
- 각 API 호출 시 `insttNm` 필터가 제대로 전달되지 않았을 수 있음
- 또는 병합 후 필터링이 누락되었을 수 있음

### 3. 캐시 데이터
- 이전 검색 결과가 캐시되어 있을 수 있음
- 캐시된 데이터에 필터가 적용되지 않았을 수 있음

---

## 🔧 해결 방안

### 방안 1: 나라장터 API 필터링 방식 확인
나라장터 API는 정확한 기관명을 요구할 수 있으므로:
- "부산광역시"로 검색
- "부산시"로 검색
- "부산대학교"로 검색

각각 시도하여 실제 매칭되는 기관명 확인

### 방안 2: 현재 시스템 필터링 강화
여러 API 결과를 병합한 후:
- 클라이언트 측에서 `insttNm` 필터 재적용
- 또는 각 API 호출 시 필터가 제대로 전달되는지 확인

### 방안 3: 검증 방법 개선
현재 시스템이 반환하는 공고번호로:
- 나라장터 공식 사이트에서 직접 조회
- 해당 공고의 실제 기관명 확인
- "부산"과의 연관성 확인

---

## 📋 다음 단계

1. ✅ **필드명 매핑 수정 완료** (`ntceInsttNm` → `insttNm`)
2. ⏳ **필터링 로직 검증 필요**
3. ⏳ **나라장터 공식 사이트에서 실제 공고번호 확인**
4. ⏳ **정확한 기관명으로 재검색**

---

## 🎯 결론

현재 시스템과 나라장터 원본 API의 결과가 일치하지 않는 주요 원인:

1. **나라장터 API 필터링 특성**: "부산"이라는 단독 키워드로는 매칭 실패 가능
2. **현재 시스템 필터링**: 여러 API 병합 시 필터가 제대로 적용되지 않았을 가능성
3. **검증 방법**: 정확한 기관명으로 재검색 필요

**권장 조치**:
- 나라장터 공식 사이트에서 실제 "부산" 관련 기관명 확인
- 해당 기관명으로 재검색하여 비교
- 현재 시스템 필터링 로직 검증 및 강화

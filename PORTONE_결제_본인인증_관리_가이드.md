# PortOne 결제 및 본인인증 관리 가이드

## 📋 개요

부산청년사업가들 웹사이트는 **PortOne (구 아임포트)**을 통해 결제 시스템과 본인인증을 관리합니다.

---

## 🚀 빠른 시작

### 1. PortOne 가맹점 등록

1. **PortOne 계정 생성**
   - https://admin.portone.io 접속
   - 회원가입 및 로그인

2. **가맹점 등록**
   - 대시보드에서 "새 가맹점 등록" 클릭
   - 사업자 정보 입력
   - 가맹점 식별코드(IMP Code) 발급

3. **index.html에 가맹점 식별코드 설정**
   ```javascript
   // index.html 파일 내에서 찾기 (약 167번째 줄)
   const PORTONE_IMP_CODE = 'imp00000000'; // 실제 발급받은 코드로 교체
   ```

---

## 💳 결제 시스템 관리

### 결제 기능 사용 위치

1. **프로그램 신청 시 결제**
   - 프로그램 상세 페이지에서 "결제하기" 버튼 클릭
   - 유료 프로그램인 경우 자동으로 결제 프로세스 시작

2. **후원 결제**
   - 메인 페이지 하단 "후원하기" 섹션
   - 후원 금액 입력 후 결제

### 프로그램 비용 등록 방법

1. **관리자 모달 접속**
   - 로그인 후 우측 상단 "관리자" 버튼 클릭

2. **프로그램 등록/수정**
   - "프로그램 관리" 탭 선택
   - "프로그램 등록" 또는 기존 프로그램 "수정" 클릭

3. **비용 정보 입력**
   - **결제 필요 여부**: 무료/유료 선택
   - **프로그램 비용**: 숫자로 직접 입력 (원 단위)
   - 예: 50000 (5만원)

4. **저장**
   - "저장" 버튼 클릭하여 프로그램 정보 저장

### 결제 프로세스

1. 사용자가 유료 프로그램 신청 시
2. PortOne 결제 창이 팝업으로 열림
3. 결제 수단 선택 (신용카드, 계좌이체 등)
4. 결제 정보 입력 및 완료
5. 결제 성공 시 자동으로 프로그램 신청 완료

### 결제 내역 확인

- PortOne 관리자 페이지에서 확인
- https://admin.portone.io > 결제 내역

---

## 🔐 본인인증 시스템 관리

### 본인인증 사용 위치

1. **회원가입 시**
   - 회원가입 4단계에서 본인인증 진행
   - 법적 확인절차를 위해 필수

2. **중고거래 글 작성 시**
   - 중고거래 카테고리 글 작성 시 본인인증 필요
   - 안전한 거래를 위한 확인 절차

### 본인인증 프로세스

1. 사용자가 "본인인증 시작하기" 버튼 클릭
2. PortOne 본인인증 팝업 창 열림
3. 휴대폰 인증 또는 공동인증서 인증 진행
4. 인증 완료 시 다음 정보 자동 저장:
   - 인증된 이름
   - 인증된 전화번호
   - 생년월일
   - 성별
   - PortOne 거래 고유번호 (imp_uid)

### 본인인증 정보 확인

**관리자 모달에서 확인**:
1. "회원 관리" 탭 선택
2. 회원 목록에서 본인인증 완료 여부 확인
3. 회원 상세 정보에서 인증 정보 확인

**마이페이지에서 확인**:
1. 로그인 후 "마이페이지" 접속
2. "본인인증 정보" 탭에서 확인

---

## ⚙️ 설정 및 관리

### PortOne 가맹점 식별코드 설정

```javascript
// index.html 파일 내 (약 167번째 줄)
const PORTONE_IMP_CODE = 'imp1234567890'; // 실제 발급받은 코드로 교체
```

### 결제 PG사 설정

현재 설정된 PG사:
- **본인인증**: `inicis` (이니시스)
- **결제**: 기본 PG사 사용

PG사 변경이 필요한 경우:
1. PortOne 관리자 페이지에서 PG사 등록
2. `index.html`에서 PG사 코드 변경
   ```javascript
   // 본인인증 PG사 변경
   IMP.certification({
       pg: 'nice', // 또는 'kcp' 등
       // ...
   });
   
   // 결제 PG사 변경
   IMP.request_pay({
       pg: 'inicis', // 또는 다른 PG사
       // ...
   });
   ```

---

## 📊 결제 및 본인인증 통계

### 관리자 모달에서 확인 가능한 정보

1. **회원 관리 > 본인인증 통계**
   - 전체 회원 수
   - 본인인증 완료 회원 수
   - 본인인증 진행률

2. **개별 회원 정보**
   - 본인인증 완료 여부
   - 인증된 이름, 전화번호, 생년월일, 성별
   - PortOne 거래 고유번호 (imp_uid)

---

## 🔧 문제 해결

### 결제가 진행되지 않는 경우

1. **가맹점 식별코드 확인**
   - `index.html`에서 `PORTONE_IMP_CODE`가 올바른지 확인
   - PortOne 관리자 페이지에서 코드 확인

2. **PG사 설정 확인**
   - PortOne 관리자 페이지에서 PG사가 활성화되어 있는지 확인
   - PG사 계약 상태 확인

3. **브라우저 콘솔 확인**
   - F12 키를 눌러 개발자 도구 열기
   - Console 탭에서 에러 메시지 확인

4. **네트워크 확인**
   - 인터넷 연결 상태 확인
   - PortOne 서버 상태 확인

### 본인인증이 진행되지 않는 경우

1. **SDK 로드 확인**
   - `index.html` 상단에 PortOne SDK가 로드되어 있는지 확인
   ```html
   <script type="text/javascript" src="https://cdn.iamport.kr/js/iamport.payment-1.2.0.js"></script>
   ```

2. **가맹점 식별코드 확인**
   - `PORTONE_IMP_CODE`가 올바른지 확인

3. **팝업 차단 확인**
   - 브라우저에서 팝업이 차단되지 않았는지 확인
   - 팝업 허용 설정

4. **인증 방식 확인**
   - 휴대폰 인증: 통신사 선택 후 인증번호 입력
   - 공동인증서: 인증서 설치 및 비밀번호 입력

### 결제/본인인증 정보가 저장되지 않는 경우

1. **로컬 스토리지 확인**
   - 브라우저 개발자 도구 > Application > Local Storage
   - 데이터가 올바르게 저장되었는지 확인

2. **서버 연동 확인**
   - 현재는 로컬 스토리지에 저장
   - 실제 운영 시 서버로 데이터 전송 필요

---

## 📝 참고사항

### 결제 금액 설정

- 프로그램 비용은 관리자가 직접 입력
- 숫자만 입력 (원 단위)
- 최소 금액: 0원 (무료)
- 최대 금액: 제한 없음 (PG사 정책에 따름)

### 본인인증 필수 항목

- 회원가입 시 본인인증 필수
- 중고거래 글 작성 시 본인인증 필수
- 기타 선택적 본인인증 기능 제공

### 보안 고려사항

1. **가맹점 식별코드 보안**
   - 코드를 공개 저장소에 올리지 않기
   - 환경 변수 또는 서버 사이드에서 관리 권장

2. **결제 정보 보안**
   - 실제 결제 정보는 PortOne 서버에서 처리
   - 웹사이트에서는 결제 결과만 수신

3. **본인인증 정보 보안**
   - 인증된 정보는 암호화하여 저장 권장
   - 개인정보 보호법 준수

---

## 🆘 추가 도움말

### PortOne 공식 문서
- 관리자 페이지: https://admin.portone.io
- 개발자 문서: https://developers.portone.io
- 고객 지원: PortOne 관리자 페이지 > 고객지원

### 문제 해결 체크리스트

- [ ] PortOne 계정 생성 및 가맹점 등록 완료
- [ ] 가맹점 식별코드가 `index.html`에 올바르게 설정됨
- [ ] PG사 계약 및 활성화 완료
- [ ] 브라우저에서 팝업 허용 설정
- [ ] 네트워크 연결 정상
- [ ] 브라우저 콘솔에 에러 없음

---

## 📞 문의

PortOne 관련 문의:
- PortOne 고객 지원: https://admin.portone.io > 고객지원

웹사이트 관련 문의:
- 개발자에게 문의



